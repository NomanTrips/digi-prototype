import{_ as w,X as b,Y as g,aF as v,a5 as t,K as r,a6 as d,a0 as s,$ as o,ad as y,aG as V,d as u,ae as h,aI as n,Q as m,a2 as f}from"./index.1438af79.js";import{Q as k}from"./QBanner.16dc56c1.js";import{Q as P}from"./QForm.242eacdf.js";import{a as p}from"./index.becf6c0c.js";import"./lodash.e6c87188.js";const c=b({name:"SignupPage",data:function(){return{username:"",password:"",retyped_password:"",firstname:"",lastname:"",middle_initial:"",dob:"",email:"",google_tf:!1,username_pw_tf:!0,accept:!0,is_failure:!1,isPwd:!0,is_validation_error:!1,is_validating:!1}},created:function(){},methods:{emailUniquenessCheck:function(){var e=this;e.email===null||e.email.length===0||(e.is_validating=!0,e.is_validation_error=!1,p.post("https://digissist-server.azurewebsites.net/users/email-uniqueness-check",{email:e.email}).then(function(l){console.log(l),l.data.is_unique||(e.is_validation_error=!0)}).catch(function(l){console.log(l)}).then(function(){e.is_validating=!1}))},onSubmit:function(){var e=this;e.is_failure=!1,e.dob="19880719",console.log(e.dob);const l={"Content-Type":"application/json"};p.post("https://digissist-server.azurewebsites.net/users/create",{first_name:e.firstname,middle_initial:e.middle_initial,last_name:e.lastname,date_of_birth:e.dob,username:e.username,password:e.password,email:e.email},{headers:l}).then(function(i){console.log(i),i.status===200?(localStorage.user_id=i.data.user_id,localStorage.token=i.data.token,localStorage.username=i.data.username,e.$router.push("/")):e.is_failure=!0}).catch(function(i){console.log(i),e.is_failure=!0})}}}),_={class:"q-pa-md q-gutter-sm"},U=f(" User account creation failed. Please try again. "),C={class:"q-pa-md row justify-center"},S={style:{width:"100%","max-width":"500px"}},$=t("div",{class:"q-pa-sm text-h6"},"Please enter the following fields:",-1),Q=f(" There's already a user account associated to that email address ");function q(e,l,i,B,z,F){return g(),v(V,null,[t("div",_,[r(s(k,{"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:o(()=>[s(u,{flat:"",label:"Dismiss"})]),default:o(()=>[U]),_:1},512),[[d,e.is_failure]])]),t("div",C,[t("div",S,[s(y,{class:"my-card"},{default:o(()=>[r(s(h,null,{default:o(()=>[$,s(P,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:o(()=>[s(n,{filled:"",color:"pink",modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=a=>e.username=a),label:"Username*","label-color":"pink","lazy-rules":"",rules:[a=>a&&a.length>0||"Please enter your username"]},null,8,["modelValue","rules"]),s(n,{filled:"",type:e.isPwd?"password":"text",color:"pink",modelValue:e.password,"onUpdate:modelValue":l[2]||(l[2]=a=>e.password=a),label:"Password*","label-color":"pink","lazy-rules":"",rules:[a=>a!==null&&a!==""||"Please type your password",a=>a.length>=8||"Password must be at least 8 characters long.",a=>a.match(/\W|_/g)!=null||"Password must contain at least one special character.",a=>a.match(/\d+/g)!=null||"Password must contain at least one number.",a=>a.match(/[a-zA-Z]/)!=null||"Password must contain at least letter."]},{append:o(()=>[s(m,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[1]||(l[1]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),s(n,{filled:"",type:e.isPwd?"password":"text",color:"pink",modelValue:e.retyped_password,"onUpdate:modelValue":l[4]||(l[4]=a=>e.retyped_password=a),label:"Re-type password:*","label-color":"pink","lazy-rules":"",rules:[a=>a!==null&&a!==""||"Please re-type your password",a=>a===e.password||"Password does not match."]},{append:o(()=>[s(m,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[3]||(l[3]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),s(n,{color:"pink",modelValue:e.email,"onUpdate:modelValue":l[5]||(l[5]=a=>e.email=a),filled:"",type:"email",label:"Email*","label-color":"pink",onBlur:e.emailUniquenessCheck,error:e.is_validation_error,clearable:"",onClear:l[6]||(l[6]=a=>e.is_validation_error=!1),disable:e.is_validating,loading:e.is_validating},{error:o(()=>[Q]),_:1},8,["modelValue","onBlur","error","disable","loading"]),s(n,{filled:"",color:"pink",modelValue:e.firstname,"onUpdate:modelValue":l[7]||(l[7]=a=>e.firstname=a),label:"Firstname*","label-color":"pink"},null,8,["modelValue"]),r(s(n,{filled:"",color:"pink",modelValue:e.middle_initial,"onUpdate:modelValue":l[8]||(l[8]=a=>e.middle_initial=a),label:"Middle initial",hint:"Optional"},null,8,["modelValue"]),[[d,!1]]),s(n,{filled:"",color:"pink",modelValue:e.lastname,"onUpdate:modelValue":l[9]||(l[9]=a=>e.lastname=a),label:"Lastname*","label-color":"pink"},null,8,["modelValue"]),r(s(n,{color:"pink",modelValue:e.dob,"onUpdate:modelValue":l[10]||(l[10]=a=>e.dob=a),filled:"",type:"date",hint:"Date of birth - Optional"},null,8,["modelValue"]),[[d,!1]]),t("div",null,[s(u,{outline:"",label:"Create",type:"submit",color:"pink",disable:e.is_validating||e.is_validation_error||e.username===""||e.password===""||e.retyped_password===""||e.email===""||e.firstname===""||e.lastname===""},null,8,["disable"])])]),_:1},8,["onSubmit"])]),_:1},512),[[d,e.username_pw_tf]])]),_:1})])])],64)}var E=w(c,[["render",q]]);export{E as default};
