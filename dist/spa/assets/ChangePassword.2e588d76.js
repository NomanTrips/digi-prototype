import{_ as p,X as u,Y as w,aV as m,a5 as t,K as f,a6 as c,a0 as o,$ as i,ac as g,aW as y,f as l,a2 as b,a3 as h,ad as P,aY as n,Q as d}from"./index.3c792d01.js";import{Q as _,a as v}from"./QForm.5a5f2d2d.js";import{a as $}from"./index.becf6c0c.js";const k=u({name:"ChangePasswordPage",data:function(){return{password:"",retyped_password:"",is_failure:!1,err_msg:"",isPwd:!0,isUpdating:!1}},created:function(){},methods:{onSubmit:function(){var s=this;s.is_failure=!1,s.isUpdating=!0;const a={"Content-Type":"application/json",Authorization:"Bearer "+s.$route.params.token};$.post(`https://digissist-server.azurewebsites.net/users/${s.$route.params.user_id}/changepassword`,{password:s.password},{headers:a}).then(function(r){console.log(r),r.status===200?(console.log(`Password succesfully changed:  ${r.data}`),s.$router.push("/login")):(s.is_failure=!0,s.err_msg="Unknown")}).catch(function(r){console.log(r),s.is_failure=!0,s.err_msg="error"}).then(function(){s.isUpdating=!1})}}}),C={class:"q-pa-md q-gutter-sm"},V={class:"q-pa-md row justify-center"},Q={style:{width:"100%","max-width":"500px"}},U=t("p",null,"Please enter in the desired new password:",-1),S={class:"row"},B={class:"q-pl-xs"};function q(s,a,r,z,D,N){return w(),m(y,null,[t("div",C,[f(o(_,{"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:i(()=>[o(l,{flat:"",label:"Dismiss"})]),default:i(()=>[b(" Password update failed: "+h()+" ",1)]),_:1},512),[[c,s.is_failure]])]),t("div",V,[t("div",Q,[o(g,{class:"my-card"},{default:i(()=>[o(P,null,{default:i(()=>[U,o(v,{onSubmit:s.onSubmit,class:"q-gutter-md"},{default:i(()=>[o(n,{filled:"",type:s.isPwd?"password":"text",color:"pink",modelValue:s.password,"onUpdate:modelValue":a[1]||(a[1]=e=>s.password=e),label:"Password*","label-color":"pink","lazy-rules":"",rules:[e=>e!==null&&e!==""||"Please type your new password"],disable:s.isUpdating},{append:i(()=>[o(d,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[0]||(a[0]=e=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue","rules","disable"]),o(n,{filled:"",type:s.isPwd?"password":"text",color:"pink",modelValue:s.retyped_password,"onUpdate:modelValue":a[3]||(a[3]=e=>s.retyped_password=e),label:"Re-type password:*","label-color":"pink","lazy-rules":"",rules:[e=>e!==null&&e!==""||"Please re-type your new password",s.retyped_password===s.password],disable:s.isUpdating},{append:i(()=>[o(d,{name:s.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[2]||(a[2]=e=>s.isPwd=!s.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue","rules","disable"]),t("div",S,[t("div",B,[o(l,{disable:s.isUpdating,outline:"",label:"Change password",type:"submit",color:"pink"},null,8,["disable"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])])],64)}var T=p(k,[["render",q]]);export{T as default};
