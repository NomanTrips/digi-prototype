var ie=Object.defineProperty,re=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var K=(e,a,o)=>a in e?ie(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,l=(e,a)=>{for(var o in a||(a={}))fe.call(a,o)&&K(e,o,a[o]);if(H)for(var o of H(a))de.call(a,o)&&K(e,o,a[o]);return e},y=(e,a)=>re(e,ce(a));import{c as ve,C as ge,D as he,ao as me,E as Pe,r as Q,a as r,F as Te,ap as ke,G as Ce,aq as ye,H as Se,ar as Be,w as W,av as Oe,aw as z,ax as qe,z as Ee,ay as Fe,P as xe,az as we,h as _,b as Ae,as as De,e as Me,g as be,aA as Re,aB as He,B as Ke}from"./index.7db9925c.js";import{u as Qe,v as j,e as We,f as ze,g as _e,p as G,h as je,r as I,s as Ge}from"./position-engine.a340bcfa.js";var $e=ve({name:"QMenu",inheritAttrs:!1,props:y(l(l(l(l({},Qe),ge),he),me),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:j},self:{type:String,validator:j},offset:{type:Array,validator:We},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...Pe,"click","escape-key"],setup(e,{slots:a,emit:o,attrs:g}){let c=null,v,f,h;const S=be(),{proxy:m}=S,{$q:n}=m,s=Q(null),u=Q(!1),L=r(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),U=Te(e,n),{registerTick:$,removeTick:B}=ke(),{registerTimeout:O,removeTimeout:q}=Ce(),{transition:J,transitionStyle:N}=ye(e,u),{localScrollTarget:E,changeScrollEvent:V,unconfigureScrollTarget:X}=ze(e,b),{anchorEl:i,canShow:Y}=_e({showing:u}),{hide:F}=Se({showing:u,canShow:Y,handleShow:oe,handleHide:ae,hideOnRouteChange:L,processOnMount:!0}),{showPortal:x,hidePortal:w,renderPortal:Z}=Be(S,s,se),P={anchorEl:i,innerRef:s,onClickOutside(t){if(e.persistent!==!0&&u.value===!0)return F(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Ke(t),!0}},A=r(()=>G(e.anchor||(e.cover===!0?"center middle":"bottom start"),n.lang.rtl)),p=r(()=>e.cover===!0?A.value:G(e.self||"top start",n.lang.rtl)),ee=r(()=>(e.square===!0?" q-menu--square":"")+(U.value===!0?" q-menu--dark q-dark":"")),te=r(()=>e.autoClose===!0?{onClick:ne}:{}),D=r(()=>u.value===!0&&e.persistent!==!0);W(D,t=>{t===!0?(Oe(k),je(P)):(z(k),I(P))});function T(){Re(()=>{let t=s.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function oe(t){if(B(),q(),c=e.noRefocus===!1?document.activeElement:null,qe(R),x(),b(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const C=Ee(t);if(C.left!==void 0){const{top:ue,left:le}=i.value.getBoundingClientRect();v={left:C.left-le,top:C.top-ue}}}f===void 0&&(f=W(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,d)),e.noFocus!==!0&&document.activeElement.blur(),$(()=>{d(),e.noFocus!==!0&&T()}),O(()=>{n.platform.is.ios===!0&&(h=e.autoClose,s.value.click()),d(),x(!0),o("show",t)},e.transitionDuration)}function ae(t){B(),q(),w(),M(!0),c!==null&&(t===void 0||t.qClickOutside!==!0)&&(c.focus(),c=null),O(()=>{w(!0),o("hide",t)},e.transitionDuration)}function M(t){v=void 0,f!==void 0&&(f(),f=void 0),(t===!0||u.value===!0)&&(Fe(R),X(),I(P),z(k)),t!==!0&&(c=null)}function b(){(i.value!==null||e.scrollTarget!==void 0)&&(E.value=xe(i.value,e.scrollTarget),V(E.value,d))}function ne(t){h!==!0?(we(m,t),o("click",t)):h=!1}function R(t){D.value===!0&&e.noFocus!==!0&&He(s.value,t.target)!==!0&&T()}function k(t){o("escape-key"),F(t)}function d(){const t=s.value;t===null||i.value===null||Ge({el:t,offset:e.offset,anchorEl:i.value,anchorOrigin:A.value,selfOrigin:p.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function se(){return _(De,{name:J.value,appear:!0},()=>u.value===!0?_("div",l(y(l({},g),{ref:s,tabindex:-1,class:["q-menu q-position-engine scroll"+ee.value,g.class],style:[g.style,N.value]}),te.value),Ae(a.default)):null)}return Me(M),Object.assign(m,{focus:T,updatePosition:d}),Z}});export{$e as Q};
