var vl=Object.defineProperty,ml=Object.defineProperties;var gl=Object.getOwnPropertyDescriptors;var At=Object.getOwnPropertySymbols;var hl=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable;var qt=(e,l,n)=>l in e?vl(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n,q=(e,l)=>{for(var n in l||(l={}))hl.call(l,n)&&qt(e,n,l[n]);if(At)for(var n of At(l))Sl.call(l,n)&&qt(e,n,l[n]);return e},X=(e,l)=>ml(e,gl(l));import{u as pl,v as Tt,f as yl,p as Ht,g as bl,h as _l,r as Mt,s as wl,c as Ot,i as Cl,Q as xl,a as kl,b as Vl,d as Il,e as Et,C as Bt}from"./ClosePopup.30811b96.js";import{c as Oe,a as v,h as s,ax as zl,ay as Al,az as ql,E as Tl,aj as Hl,F as Ml,r as B,ak as Ol,G as El,al as Bl,H as Pl,am as Rl,w as ce,j as We,C as Pt,y as Rt,P as Fl,as as Ll,g as Ye,b as $l,D as se,aA as vt,aB as Kt,aC as Wt,aD as Xt,u as Dl,ab as Nl,d as jl,ac as Ql,L as Ul,a9 as Kl,Q as Ke,ad as Wl,k as Xl,n as re,aE as Yl,aF as Gl,aG as Jl,aH as Zl,aI as ea,aJ as ta,aK as Ft,aL as Re,aM as la,aN as aa,aO as ft,A as nt,aP as na,s as Ae,aQ as Lt,ag as oa,aR as ia,W as ua,_ as ra,X as sa,Y as ot,aS as $t,a5 as ne,a0 as V,$ as H,aT as it,aU as qe,aV as ca,aW as da,K as ue,a6 as Te,aa as ut,aX as Dt,f as He,aY as rt,aZ as fa,a_ as va,a2 as Ge,Z as ma,a7 as ga}from"./index.b5827133.js";import{a as Nt}from"./index.becf6c0c.js";import{_ as Qe}from"./lodash.e6c87188.js";var st=Oe({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:l}){const n=v(()=>e.sent===!0?"sent":"received"),f=v(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),w=v(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),u=v(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),m=v(()=>e.size!==void 0?`col-${e.size}`:""),d=v(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function p(c){return l.stamp!==void 0?[c,s("div",{class:"q-message-stamp"},l.stamp())]:e.stamp?[c,s("div",{class:"q-message-stamp",[d.value.stamp]:e.stamp})]:[c]}function z(c,C){const I=C===!0?c.length>1?g=>g:g=>s("div",[g]):g=>s("div",{[d.value.msg]:g});return c.map((g,F)=>s("div",{key:F,class:w.value},[s("div",{class:f.value},p(I(g)))]))}return()=>{const c=[];l.avatar!==void 0?c.push(l.avatar()):e.avatar!==void 0&&c.push(s("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const C=[];l.name!==void 0?C.push(s("div",{class:`q-message-name q-message-name--${n.value}`},l.name())):e.name!==void 0&&C.push(s("div",{class:`q-message-name q-message-name--${n.value}`,[d.value.name]:e.name})),l.default!==void 0?C.push(z(zl(l.default()),!0)):e.text!==void 0&&C.push(z(e.text)),c.push(s("div",{class:m.value},C));const I=[];return l.label!==void 0?I.push(s("div",{class:"q-message-label"},l.label())):e.label!==void 0&&I.push(s("div",{class:"q-message-label",[d.value.label]:e.label})),I.push(s("div",{class:u.value},c)),s("div",{class:`q-message q-message-${n.value}`},I)}}});const ha=[s("circle",{cx:"15",cy:"15",r:"15"},[s("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),s("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),s("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[s("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),s("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),s("circle",{cx:"105",cy:"15",r:"15"},[s("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),s("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Sa=Oe({name:"QSpinnerDots",props:Al,setup(e){const{cSize:l,classes:n}=ql(e);return()=>s("svg",{class:n.value,fill:"currentColor",width:l.value,height:l.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},ha)}}),pa=Oe({name:"QTooltip",inheritAttrs:!1,props:X(q(q(q({},pl),Tl),Hl),{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Tt},self:{type:String,default:"top middle",validator:Tt},offset:{type:Array,default:()=>[14,14],validator:yl},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}}),emits:[...Ml],setup(e,{slots:l,emit:n,attrs:f}){let w,u;const m=Ye(),{proxy:{$q:d}}=m,p=B(null),z=B(!1),c=v(()=>Ht(e.anchor,d.lang.rtl)),C=v(()=>Ht(e.self,d.lang.rtl)),I=v(()=>e.persistent!==!0),{registerTick:g,removeTick:F}=Ol(),{registerTimeout:O,removeTimeout:k}=El(),{transition:Y,transitionStyle:N}=Bl(e,z),{localScrollTarget:J,changeScrollEvent:P,unconfigureScrollTarget:E}=bl(e,a),{anchorEl:L,canShow:de,anchorEvents:G}=_l({showing:z,configureAnchorEl:he}),{show:fe,hide:Z}=Pl({showing:z,canShow:de,handleShow:me,handleHide:ge,hideOnRouteChange:I,processOnMount:!0});Object.assign(G,{delayShow:be,delayHide:ie});const{showPortal:K,hidePortal:oe,renderPortal:ve}=Rl(m,p,b);if(d.platform.is.mobile===!0){const h={anchorEl:L,innerRef:p,onClickOutside(y){return Z(y),y.target.classList.contains("q-dialog__backdrop")&&se(y),!0}},M=v(()=>e.modelValue===null&&e.persistent!==!0&&z.value===!0);ce(M,y=>{(y===!0?Cl:Mt)(h)}),We(()=>{Mt(h)})}function me(h){F(),k(),K(),g(()=>{u=new MutationObserver(()=>le()),u.observe(p.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),le(),a()}),w===void 0&&(w=ce(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,le)),O(()=>{K(!0),n("show",h)},e.transitionDuration)}function ge(h){F(),k(),oe(),ee(),O(()=>{oe(!0),n("hide",h)},e.transitionDuration)}function ee(){u!==void 0&&(u.disconnect(),u=void 0),w!==void 0&&(w(),w=void 0),E(),Pt(G,"tooltipTemp")}function le(){const h=p.value;L.value===null||!h||wl({el:h,offset:e.offset,anchorEl:L.value,anchorOrigin:c.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function be(h){if(d.platform.is.mobile===!0){Ot(),document.body.classList.add("non-selectable");const M=L.value,y=["touchmove","touchcancel","touchend","click"].map(_=>[M,_,"delayHide","passiveCapture"]);Rt(G,"tooltipTemp",y)}O(()=>{fe(h)},e.delay)}function ie(h){k(),d.platform.is.mobile===!0&&(Pt(G,"tooltipTemp"),Ot(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),O(()=>{Z(h)},e.hideDelay)}function he(){if(e.noParentEvent===!0||L.value===null)return;const h=d.platform.is.mobile===!0?[[L.value,"touchstart","delayShow","passive"]]:[[L.value,"mouseenter","delayShow","passive"],[L.value,"mouseleave","delayHide","passive"]];Rt(G,"anchor",h)}function a(){if(L.value!==null||e.scrollTarget!==void 0){J.value=Fl(L.value,e.scrollTarget);const h=e.noParentEvent===!0?le:Z;P(J.value,h)}}function i(){return z.value===!0?s("div",X(q({},f),{ref:p,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",f.class],style:[f.style,N.value],role:"complementary"}),$l(l.default)):null}function b(){return s(Ll,{name:Y.value,appear:!0},i)}return We(ee),Object.assign(m.proxy,{updatePosition:le}),ve}}),ya=Oe({name:"QField",inheritAttrs:!1,props:vt,emits:Kt,setup(){return Wt(Xt())}});const ba={xs:8,sm:10,md:14,lg:20,xl:24};var _a=Oe({name:"QChip",props:X(q(q({},Dl),Nl),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:n}){const{proxy:{$q:f}}=Ye(),w=jl(e,f),u=Ql(e,ba),m=v(()=>e.selected===!0||e.icon!==void 0),d=v(()=>e.selected===!0?e.iconSelected||f.iconSet.chip.selected:e.icon),p=v(()=>e.iconRemove||f.iconSet.chip.remove),z=v(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=v(()=>{const k=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(k?` text-${k} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(z.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(w.value===!0?" q-chip--dark q-dark":"")}),C=v(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function I(k){k.keyCode===13&&g(k)}function g(k){e.disable||(n("update:selected",!e.selected),n("click",k))}function F(k){(k.keyCode===void 0||k.keyCode===13)&&(se(k),e.disable===!1&&(n("update:modelValue",!1),n("remove")))}function O(){const k=[];z.value===!0&&k.push(s("div",{class:"q-focus-helper"})),m.value===!0&&k.push(s(Ke,{class:"q-chip__icon q-chip__icon--left",name:d.value}));const Y=e.label!==void 0?[s("div",{class:"ellipsis"},[e.label])]:void 0;return k.push(s("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Wl(l.default,Y))),e.iconRight&&k.push(s(Ke,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&k.push(s(Ke,X(q({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:p.value},C.value),{onClick:F,onKeyup:F}))),k}return()=>{if(e.modelValue===!1)return;const k={class:c.value,style:u.value};return z.value===!0&&Object.assign(k,C.value,{onClick:g,onKeyup:I}),Ul("div",k,O(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Kl,e.ripple]])}}});let Xe=!1;{const e=document.createElement("div"),l=document.createElement("div");e.setAttribute("dir","rtl"),e.style.width="1px",e.style.height="1px",e.style.overflow="auto",l.style.width="1000px",l.style.height="1px",document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Xe=e.scrollLeft>=0,e.remove()}const te=1e3,wa=["start","center","end","start-force","center-force","end-force"],Yt=Array.prototype.filter,Ca=window.getComputedStyle(document.body).overflowAnchor===void 0?Xl:function(e,l){requestAnimationFrame(()=>{if(e===void 0)return;const n=e.children||[];Yt.call(n,w=>w.dataset&&w.dataset.qVsAnchor!==void 0).forEach(w=>{delete w.dataset.qVsAnchor});const f=n[l];f&&f.dataset&&(f.dataset.qVsAnchor="")})};function Me(e,l){return e+l}function ct(e,l,n,f,w,u,m,d){const p=e===window?document.scrollingElement||document.documentElement:e,z=w===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-m-d,scrollMaxSize:0,offsetStart:-m,offsetEnd:-d};if(w===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=p.scrollLeft,c.scrollViewSize+=p.clientWidth),c.scrollMaxSize=p.scrollWidth,u===!0&&(c.scrollStart=(Xe===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=p.scrollTop,c.scrollViewSize+=p.clientHeight),c.scrollMaxSize=p.scrollHeight),n!==null)for(let C=n.previousElementSibling;C!==null;C=C.previousElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=C[z]);if(f!==null)for(let C=f.nextElementSibling;C!==null;C=C.nextElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=C[z]);if(l!==e){const C=p.getBoundingClientRect(),I=l.getBoundingClientRect();w===!0?(c.offsetStart+=I.left-C.left,c.offsetEnd-=I.width):(c.offsetStart+=I.top-C.top,c.offsetEnd-=I.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function jt(e,l,n,f){l==="end"&&(l=(e===window?document.body:e)[n===!0?"scrollWidth":"scrollHeight"]),e===window?n===!0?(f===!0&&(l=(Xe===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):n===!0?(f===!0&&(l=(Xe===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Fe(e,l,n,f){if(n>=f)return 0;const w=l.length,u=Math.floor(n/te),m=Math.floor((f-1)/te)+1;let d=e.slice(u,m).reduce(Me,0);return n%te!==0&&(d-=l.slice(u*te,n).reduce(Me,0)),f%te!==0&&f!==w&&(d-=l.slice(f,m*te).reduce(Me,0)),d}const xa={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},ka=q({virtualScrollHorizontal:Boolean,onVirtualScroll:Function},xa);function Va({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:n,virtualScrollItemSizeComputed:f}){const w=Ye(),{props:u,emit:m,proxy:d}=w,{$q:p}=d;let z,c,C,I=[],g;const F=B(0),O=B(0),k=B({}),Y=B(null),N=B(null),J=B(null),P=B({from:0,to:0}),E=v(()=>u.tableColspan!==void 0?u.tableColspan:100);f===void 0&&(f=v(()=>u.virtualScrollItemSize));const L=v(()=>f.value+";"+u.virtualScrollHorizontal),de=v(()=>L.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);ce(de,()=>{ee()}),ce(L,G);function G(){ge(c,!0)}function fe(a){ge(a===void 0?c:a)}function Z(a,i){const b=l();if(b==null||b.nodeType===8)return;const h=ct(b,n(),Y.value,N.value,u.virtualScrollHorizontal,p.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);C!==h.scrollViewSize&&ee(h.scrollViewSize),oe(b,h,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,wa.indexOf(i)>-1?i:c>-1&&a>c?"end":"start")}function K(){const a=l();if(a==null||a.nodeType===8)return;const i=ct(a,n(),Y.value,N.value,u.virtualScrollHorizontal,p.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),b=e.value-1,h=i.scrollMaxSize-i.offsetStart-i.offsetEnd-O.value;if(z===i.scrollStart)return;if(i.scrollMaxSize<=0){oe(a,i,0,0);return}C!==i.scrollViewSize&&ee(i.scrollViewSize),ve(P.value.from);const M=Math.floor(i.scrollMaxSize-Math.max(i.scrollViewSize,i.offsetEnd)-Math.min(g[b],i.scrollViewSize/2));if(M>0&&Math.ceil(i.scrollStart)>=M){oe(a,i,b,i.scrollMaxSize-i.offsetEnd-I.reduce(Me,0));return}let y=0,_=i.scrollStart-i.offsetStart,$=_;if(_<=h&&_+i.scrollViewSize>=F.value)_-=F.value,y=P.value.from,$=_;else for(let x=0;_>=I[x]&&y<b;x++)_-=I[x],y+=te;for(;_>0&&y<b;)_-=g[y],_>-i.scrollViewSize?(y++,$=_):$=g[y]+_;oe(a,i,y,$)}function oe(a,i,b,h,M){const y=typeof M=="string"&&M.indexOf("-force")>-1,_=y===!0?M.replace("-force",""):M,$=_!==void 0?_:"start";let x=Math.max(0,b-k.value[$]),Q=x+k.value.total;Q>e.value&&(Q=e.value,x=Math.max(0,Q-k.value.total)),z=i.scrollStart;const _e=x!==P.value.from||Q!==P.value.to;if(_e===!1&&_===void 0){be(b);return}const{activeElement:Ee}=document,ae=J.value;_e===!0&&ae!==null&&ae!==Ee&&ae.contains(Ee)===!0&&(ae.addEventListener("focusout",me),setTimeout(()=>{ae!==void 0&&ae.removeEventListener("focusout",me)})),Ca(ae,b-x);const Le=_!==void 0?g.slice(x,b).reduce(Me,0):0;if(_e===!0){const Se=Q>=P.value.from&&x<=P.value.to?P.value.to:Q;P.value={from:x,to:Se},F.value=Fe(I,g,0,x),O.value=Fe(I,g,Q,e.value),requestAnimationFrame(()=>{P.value.to!==Q&&z===i.scrollStart&&(P.value={from:P.value.from,to:Q},O.value=Fe(I,g,Q,e.value))})}requestAnimationFrame(()=>{if(z!==i.scrollStart)return;_e===!0&&ve(x);const Se=g.slice(x,b).reduce(Me,0),we=Se+i.offsetStart+F.value,$e=we+g[b];let Be=we+h;if(_!==void 0){const Je=Se-Le,U=i.scrollStart+Je;Be=y!==!0&&U<we&&$e<U+i.scrollViewSize?U:_==="end"?$e-i.scrollViewSize:we-(_==="start"?0:Math.round((i.scrollViewSize-g[b])/2))}z=Be,jt(a,Be,u.virtualScrollHorizontal,p.lang.rtl),be(b)})}function ve(a){const i=J.value;if(i){const b=Yt.call(i.children,x=>x.classList&&x.classList.contains("q-virtual-scroll--skip")===!1),h=b.length,M=u.virtualScrollHorizontal===!0?x=>x.getBoundingClientRect().width:x=>x.offsetHeight;let y=a,_,$;for(let x=0;x<h;){for(_=M(b[x]),x++;x<h&&b[x].classList.contains("q-virtual-scroll--with-prev")===!0;)_+=M(b[x]),x++;$=_-g[y],$!==0&&(g[y]+=$,I[Math.floor(y/te)]+=$),y++}}}function me(){J.value!==void 0&&J.value.focus()}function ge(a,i){const b=1*f.value;(i===!0||Array.isArray(g)===!1)&&(g=[]);const h=g.length;g.length=e.value;for(let y=e.value-1;y>=h;y--)g[y]=b;const M=Math.floor((e.value-1)/te);I=[];for(let y=0;y<=M;y++){let _=0;const $=Math.min((y+1)*te,e.value);for(let x=y*te;x<$;x++)_+=g[x];I.push(_)}c=-1,z=void 0,F.value=Fe(I,g,0,P.value.from),O.value=Fe(I,g,P.value.to,e.value),a>=0?(ve(P.value.from),re(()=>{Z(a)})):ie()}function ee(a){if(a===void 0&&typeof window!="undefined"){const _=l();_!=null&&_.nodeType!==8&&(a=ct(_,n(),Y.value,N.value,u.virtualScrollHorizontal,p.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}C=a;const i=parseFloat(u.virtualScrollSliceRatioBefore)||0,b=parseFloat(u.virtualScrollSliceRatioAfter)||0,h=1+i+b,M=a===void 0||a<=0?1:Math.ceil(a/f.value),y=Math.max(1,M,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/h));k.value={total:Math.ceil(y*h),start:Math.ceil(y*i),center:Math.ceil(y*(.5+i)),end:Math.ceil(y*(1+i)),view:M}}function le(a,i){const b=u.virtualScrollHorizontal===!0?"width":"height",h={["--q-virtual-scroll-item-"+b]:f.value+"px"};return[a==="tbody"?s(a,{class:"q-virtual-scroll__padding",key:"before",ref:Y},[s("tr",[s("td",{style:q({[b]:`${F.value}px`},h),colspan:E.value})])]):s(a,{class:"q-virtual-scroll__padding",key:"before",ref:Y,style:q({[b]:`${F.value}px`},h)}),s(a,{class:"q-virtual-scroll__content",key:"content",ref:J,tabindex:-1},i.flat()),a==="tbody"?s(a,{class:"q-virtual-scroll__padding",key:"after",ref:N},[s("tr",[s("td",{style:q({[b]:`${O.value}px`},h),colspan:E.value})])]):s(a,{class:"q-virtual-scroll__padding",key:"after",ref:N,style:q({[b]:`${O.value}px`},h)})]}function be(a){c!==a&&(u.onVirtualScroll!==void 0&&m("virtual-scroll",{index:a,from:P.value.from,to:P.value.to-1,direction:a<c?"decrease":"increase",ref:d}),c=a)}ee();const ie=Yl(K,p.platform.is.ios===!0?120:35);Gl(()=>{ee()});let he=!1;return Jl(()=>{he=!0}),Zl(()=>{if(he!==!0)return;const a=l();z!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?jt(a,z,u.virtualScrollHorizontal,p.lang.rtl):Z(c)}),We(()=>{ie.cancel()}),Object.assign(d,{scrollTo:Z,reset:G,refresh:fe}),{virtualScrollSliceRange:P,virtualScrollSliceSizeComputed:k,setVirtualScrollSize:ee,onVirtualScrollEvt:ie,localResetVirtualScroll:ge,padVirtualScroll:le,scrollTo:Z,reset:G,refresh:fe}}const Qt=e=>["add","add-unique","toggle"].includes(e),Ia=".*+?^${}()|[]\\",za=Object.keys(vt);var Aa=Oe({name:"QSelect",inheritAttrs:!1,props:X(q(q(q({},ka),ea),vt),{modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Qt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function}),emits:[...Kt,"add","remove","input-value","keyup","keypress","keydown","filter-abort"],setup(e,{slots:l,emit:n}){const{proxy:f}=Ye(),{$q:w}=f,u=B(!1),m=B(!1),d=B(-1),p=B(""),z=B(!1),c=B(!1);let C,I,g,F,O,k,Y,N,J;const P=B(null),E=B(null),L=B(null),de=B(null),G=B(null),fe=ta(e),Z=na(xt),K=v(()=>Array.isArray(e.options)?e.options.length:0),oe=v(()=>e.virtualScrollItemSize===void 0?e.dense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ve,virtualScrollSliceSizeComputed:me,localResetVirtualScroll:ge,padVirtualScroll:ee,onVirtualScrollEvt:le,reset:be,scrollTo:ie,setVirtualScrollSize:he}=Va({virtualScrollLength:K,getVirtualScrollTarget:el,getVirtualScrollEl:wt,virtualScrollItemSizeComputed:oe}),a=Xt(),i=v(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,r=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const o=e.mapOptions===!0&&I!==void 0?I:[],S=r.map(T=>Zt(T,o));return e.modelValue===null&&t===!0?S.filter(T=>T!==null):S}return r}),b=v(()=>{const t={};return za.forEach(r=>{const o=e[r];o!==void 0&&(t[r]=o)}),t}),h=v(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),M=v(()=>Ft(i.value)),y=v(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||i.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),_=v(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),$=v(()=>K.value===0),x=v(()=>i.value.map(t=>W.value(t)).join(", ")),Q=v(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),_e=v(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||i.value.some(Q.value))),Ee=v(()=>a.focused.value===!0?e.tabindex:-1),ae=v(()=>({tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-owns":`${a.targetUid.value}_lb`,"aria-controls":`${a.targetUid.value}_lb`})),Le=v(()=>{const t={id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"};return d.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${d.value}`),t}),Se=v(()=>i.value.map((t,r)=>({index:r,opt:t,html:Q.value(t),selected:!0,removeAtIndex:Jt,toggleOption:pe,tabindex:Ee.value}))),we=v(()=>{if(K.value===0)return[];const{from:t,to:r}=ve.value;return e.options.slice(t,r).map((o,S)=>{const T=Ce.value(o)===!0,A=t+S,R={clickable:!0,active:!1,activeClass:Je.value,manualFocus:!0,focused:!1,disable:T,tabindex:-1,dense:e.optionsDense,dark:h.value,role:"option",id:`${a.targetUid.value}_${A}`,onClick:()=>{pe(o)}};return T!==!0&&(tt(o)===!0&&(R.active=!0),d.value===A&&(R.focused=!0),R["aria-selected"]=R.active===!0?"true":"false",w.platform.is.desktop===!0&&(R.onMousemove=()=>{u.value===!0&&xe(A)})),{index:A,opt:o,html:Q.value(o),label:W.value(o),selected:R.active,focused:R.focused,toggleOption:pe,setOptionIndex:xe,itemProps:R}})}),$e=v(()=>e.dropdownIcon!==void 0?e.dropdownIcon:w.iconSet.arrow.dropdown),Be=v(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Je=v(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),U=v(()=>et(e.optionValue,"value")),W=v(()=>et(e.optionLabel,"label")),Ce=v(()=>et(e.optionDisable,"disable")),De=v(()=>i.value.map(t=>U.value(t))),Gt=v(()=>{const t={onInput:xt,onChange:Z,onKeydown:_t,onKeyup:yt,onKeypress:bt,onFocus:St,onClick(r){g===!0&&Ae(r)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Z,t});ce(i,t=>{I=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(m.value!==!0&&u.value!==!0||M.value!==!0)&&(F!==!0&&ze(),(m.value===!0||u.value===!0)&&ke(""))},{immediate:!0}),ce(()=>e.fillInput,ze),ce(u,lt),ce(K,fl);function gt(t){return e.emitValue===!0?U.value(t):t}function Ze(t){if(t>-1&&t<i.value.length)if(e.multiple===!0){const r=e.modelValue.slice();n("remove",{index:t,value:r.splice(t,1)[0]}),n("update:modelValue",r)}else n("update:modelValue",null)}function Jt(t){Ze(t),a.focus()}function ht(t,r){const o=gt(t);if(e.multiple!==!0){e.fillInput===!0&&Pe(W.value(t),!0,!0),n("update:modelValue",o);return}if(i.value.length===0){n("add",{index:0,value:o}),n("update:modelValue",e.multiple===!0?[o]:o);return}if(r===!0&&tt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const S=e.modelValue.slice();n("add",{index:S.length,value:o}),S.push(o),n("update:modelValue",S)}function pe(t,r){if(a.editable.value!==!0||t===void 0||Ce.value(t)===!0)return;const o=U.value(t);if(e.multiple!==!0){r!==!0&&(Pe(e.fillInput===!0?W.value(t):"",!0,!0),ye()),E.value!==null&&E.value.focus(),(i.value.length===0||Re(U.value(i.value[0]),o)!==!0)&&n("update:modelValue",e.emitValue===!0?o:t);return}if((g!==!0||z.value===!0)&&a.focus(),St(),i.value.length===0){const A=e.emitValue===!0?o:t;n("add",{index:0,value:A}),n("update:modelValue",e.multiple===!0?[A]:A);return}const S=e.modelValue.slice(),T=De.value.findIndex(A=>Re(A,o));if(T>-1)n("remove",{index:T,value:S.splice(T,1)[0]});else{if(e.maxValues!==void 0&&S.length>=e.maxValues)return;const A=e.emitValue===!0?o:t;n("add",{index:S.length,value:A}),S.push(A)}n("update:modelValue",S)}function xe(t){if(w.platform.is.desktop!==!0)return;const r=t>-1&&t<K.value?t:-1;d.value!==r&&(d.value=r)}function Ne(t=1,r){if(u.value===!0){let o=d.value;do o=Lt(o+t,-1,K.value-1);while(o!==-1&&o!==d.value&&Ce.value(e.options[o])===!0);d.value!==o&&(xe(o),ie(o),r!==!0&&e.useInput===!0&&e.fillInput===!0&&je(o>=0?W.value(e.options[o]):k))}}function Zt(t,r){const o=S=>Re(U.value(S),t);return e.options.find(o)||r.find(o)||t}function et(t,r){const o=t!==void 0?t:r;return typeof o=="function"?o:S=>S!==null&&typeof S=="object"&&o in S?S[o]:S}function tt(t){const r=U.value(t);return De.value.find(o=>Re(o,r))!==void 0}function St(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===x.value)&&E.value.select()}function pt(t){oa(t,27)===!0&&u.value===!0&&(Ae(t),ye(),ze()),n("keyup",t)}function yt(t){const{value:r}=t.target;if(t.keyCode!==void 0){pt(t);return}if(t.target.value="",clearTimeout(C),ze(),typeof r=="string"&&r.length>0){const o=r.toLocaleLowerCase(),S=A=>{const R=e.options.find(j=>A.value(j).toLocaleLowerCase()===o);return R===void 0?!1:(i.value.indexOf(R)===-1?pe(R):ye(),!0)},T=A=>{S(U)!==!0&&(S(W)===!0||A===!0||ke(r,!0,()=>T(!0)))};T()}else a.clearValue(t)}function bt(t){n("keypress",t)}function _t(t){if(n("keydown",t),ia(t)===!0)return;const r=p.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),o=t.shiftKey!==!0&&e.multiple!==!0&&(d.value>-1||r===!0);if(t.keyCode===27){nt(t);return}if(t.keyCode===9&&o===!1){Ve();return}if(t.target===void 0||t.target.id!==a.targetUid.value)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&u.value===!1){se(t),Ie();return}if(t.keyCode===8&&e.hideSelected!==!0&&p.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ze(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&n("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof p.value!="string"||p.value.length===0)&&(se(t),d.value=-1,Ne(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&me.value!==void 0&&(se(t),d.value=Math.max(-1,Math.min(K.value,d.value+(t.keyCode===33?-1:1)*me.value.view)),Ne(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(se(t),Ne(t.keyCode===38?-1:1,e.multiple));const S=K.value;if((N===void 0||J<Date.now())&&(N=""),S>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===t.ctrlKey&&(t.keyCode!==32||N.length>0)){u.value!==!0&&Ie(t);const T=t.key.toLocaleLowerCase(),A=N.length===1&&N[0]===T;J=Date.now()+1500,A===!1&&(se(t),N+=T);const R=new RegExp("^"+N.split("").map(at=>Ia.indexOf(at)>-1?"\\"+at:at).join(".*"),"i");let j=d.value;if(A===!0||j<0||R.test(W.value(e.options[j]))!==!0)do j=Lt(j+1,-1,S-1);while(j!==d.value&&(Ce.value(e.options[j])===!0||R.test(W.value(e.options[j]))!==!0));d.value!==j&&re(()=>{xe(j),ie(j),j>=0&&e.useInput===!0&&e.fillInput===!0&&je(W.value(e.options[j]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||N!=="")&&(t.keyCode!==9||o===!1))){if(t.keyCode!==9&&se(t),d.value>-1&&d.value<S){pe(e.options[d.value]);return}if(r===!0){const T=(A,R)=>{if(R){if(Qt(R)!==!0)return}else R=e.newValueMode;if(A==null)return;Pe("",e.multiple!==!0,!0),(R==="toggle"?pe:ht)(A,R==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),ye())};if(e.onNewValue!==void 0?n("new-value",p.value,T):T(p.value),e.multiple!==!0)return}u.value===!0?Ve():a.innerLoading.value!==!0&&Ie()}}function wt(){return g===!0?G.value:L.value!==null&&L.value.__qPortalInnerRef.value!==null?L.value.__qPortalInnerRef.value:void 0}function el(){return wt()}function tl(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?Se.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?Se.value.map((t,r)=>s(_a,{key:"option-"+r,removable:a.editable.value===!0&&Ce.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Ee.value,onRemove(){t.removeAtIndex(r)}},()=>s("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:W.value(t.opt)}))):[s("span",{[_e.value===!0?"innerHTML":"textContent"]:e.displayValue!==void 0?e.displayValue:x.value})]}function Ct(){if($.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:p.value}):void 0;const t=l.option!==void 0?l.option:o=>s(Il,q({key:o.index},o.itemProps),()=>s(kl,()=>s(Vl,()=>s("span",{[o.html===!0?"innerHTML":"textContent"]:o.label}))));let r=ee("div",we.value.map(t));return l["before-options"]!==void 0&&(r=l["before-options"]().concat(r)),ua(l["after-options"],r)}function ll(t,r){const o=r===!0?q(q({},ae.value),a.splitAttrs.attributes.value):void 0,S=q(X(q({ref:r===!0?E:void 0,key:"i_t",class:y.value,style:e.inputStyle,value:p.value!==void 0?p.value:"",type:"search"},o),{id:r===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t!==!0&&e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0}),Gt.value);return t!==!0&&g===!0&&(Array.isArray(S.class)===!0?S.class=[...S.class,"no-pointer-events"]:S.class+=" no-pointer-events"),s("input",S)}function xt(t){clearTimeout(C),!(t&&t.target&&t.target.composing===!0)&&(je(t.target.value||""),F=!0,k=p.value,a.focused.value!==!0&&(g!==!0||z.value===!0)&&a.focus(),e.onFilter!==void 0&&(C=setTimeout(()=>{ke(p.value)},e.inputDebounce)))}function je(t){p.value!==t&&(p.value=t,n("input-value",t))}function Pe(t,r,o){F=o!==!0,e.useInput===!0&&(je(t),(r===!0||o!==!0)&&(k=t),r!==!0&&ke(t))}function ke(t,r,o){if(e.onFilter===void 0||r!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?n("filter-abort"):(a.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&i.value.length>0&&F!==!0&&t===W.value(i.value[0])&&(t="");const S=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);clearTimeout(O),O=S,n("filter",t,(T,A)=>{(r===!0||a.focused.value===!0)&&O===S&&(clearTimeout(O),typeof T=="function"&&T(),c.value=!1,re(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(r===!0?u.value===!0&&ye():u.value===!0?lt(!0):u.value=!0),typeof A=="function"&&re(()=>{A(f)}),typeof o=="function"&&re(()=>{o(f)})}))},()=>{a.focused.value===!0&&O===S&&(clearTimeout(O),a.innerLoading.value=!1,c.value=!1),u.value===!0&&(u.value=!1)})}function al(){return s(xl,X(q({ref:L,class:_.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&$.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:h.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Be.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0},Le.value),{onScrollPassive:le,onBeforeShow:Vt,onBeforeHide:nl,onShow:ol}),Ct)}function nl(t){It(t),Ve()}function ol(){he()}function il(t){Ae(t),E.value!==null&&E.value.focus(),z.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function ul(t){Ae(t),re(()=>{z.value=!1})}function rl(){const t=[s(ya,X(q(X(q({class:`col-auto ${a.fieldClass.value}`},b.value),{for:a.targetUid.value,dark:h.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:p.value.length>0}),a.splitAttrs.listeners.value),{onFocus:il,onBlur:ul}),X(q({},l),{rawControl:()=>a.getControl(!0),before:void 0,after:void 0}))];return u.value===!0&&t.push(s("div",X(q({ref:G,class:_.value+" scroll",style:e.popupContentStyle},Le.value),{onClick:nt,onScrollPassive:le}),Ct())),s(ft,{ref:de,modelValue:m.value,position:e.useInput===!0?"top":void 0,transitionShow:Y,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Vt,onBeforeHide:sl,onHide:cl,onShow:dl},()=>s("div",{class:"q-select__dialog"+(h.value===!0?" q-select__dialog--dark q-dark":"")+(z.value===!0?" q-select__dialog--focused":"")},t))}function sl(t){It(t),de.value!==null&&de.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function cl(t){ye(),a.focused.value===!1&&n("blur",t),ze()}function dl(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),he()}function Ve(){m.value!==!0&&(d.value=-1,u.value===!0&&(u.value=!1),a.focused.value===!1&&(clearTimeout(O),O=void 0,a.innerLoading.value===!0&&(n("filter-abort"),a.innerLoading.value=!1,c.value=!1)))}function Ie(t){a.editable.value===!0&&(g===!0?(a.onControlFocusin(t),m.value=!0,re(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?ke(p.value):($.value!==!0||l["no-option"]!==void 0)&&(u.value=!0))}function ye(){m.value=!1,Ve()}function ze(){e.useInput===!0&&Pe(e.multiple!==!0&&e.fillInput===!0&&i.value.length>0&&W.value(i.value[0])||"",!0,!0)}function lt(t){let r=-1;if(t===!0){if(i.value.length>0){const o=U.value(i.value[0]);r=e.options.findIndex(S=>Re(U.value(S),o))}ge(r)}xe(r)}function fl(){u.value===!0&&a.innerLoading.value===!1&&(be(),re(()=>{u.value===!0&&a.innerLoading.value===!1&&lt(!0)}))}function kt(){m.value===!1&&L.value!==null&&L.value.updatePosition()}function Vt(t){t!==void 0&&Ae(t),n("popup-show",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function It(t){t!==void 0&&Ae(t),n("popup-hide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function zt(){g=w.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||$.value===!1:!0),Y=w.platform.is.ios===!0&&g===!0&&e.useInput===!0?"fade":e.transitionShow}return la(zt),aa(kt),zt(),We(()=>{clearTimeout(C)}),Object.assign(f,{showPopup:Ie,hidePopup:ye,removeAtIndex:Ze,add:ht,toggleOption:pe,getOptionIndex:()=>d.value,setOptionIndex:xe,moveOptionSelection:Ne,filter:ke,updateMenuPosition:kt,updateInputValue:Pe,isOptionSelected:tt,getEmittingOptionValue:gt,isOptionDisabled:(...t)=>Ce.value.apply(null,t)===!0,getOptionValue:(...t)=>U.value.apply(null,t),getOptionLabel:(...t)=>W.value.apply(null,t)}),Object.assign(a,{innerValue:i,fieldClass:v(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:E,hasValue:M,showPopup:Ie,floatingLabel:v(()=>(e.hideSelected===!0?p.value.length>0:M.value===!0)||Ft(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(m.value===!0||$.value!==!0||l["no-option"]!==void 0))return g===!0?rl():al();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{ze(),Ve()})},onClick(t){if(nt(t),g!==!0&&u.value===!0){Ve(),E.value!==null&&E.value.focus();return}Ie(t)}},getControl:t=>{const r=tl(),o=t===!0||m.value!==!0||g!==!0;if(e.useInput===!0)r.push(ll(t,o));else if(a.editable.value===!0){const T=o===!0?ae.value:void 0;r.push(s("input",X(q({ref:o===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:o===!0?a.targetUid.value:void 0,readonly:!0},T),{onKeydown:_t,onKeyup:pt,onKeypress:bt}))),o===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&r.push(s("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,onKeyup:yt}))}if(fe.value!==void 0&&e.disable!==!0&&De.value.length>0){const T=De.value.map(A=>s("option",{value:A,selected:!0}));r.push(s("select",{class:"hidden",name:fe.value,multiple:e.multiple},T))}const S=e.useInput===!0||o!==!0?void 0:a.splitAttrs.attributes.value;return s("div",q({class:"q-field__native row items-center"},S),r)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[s(Ke,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:$e.value})]:null}),Wt(a)}});const qa=[{messageId:1,sender:"Human",message_text:"Hello, who are you?"},{messageId:2,sender:"AI",message_text:"I am an AI created by OpenAI. How can I help you today?"}];var Ta={messages:qa},Ue,Ha=new Uint8Array(16);function Ma(){if(!Ue&&(Ue=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ue(Ha)}var Oa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ea(e){return typeof e=="string"&&Oa.test(e)}var D=[];for(var dt=0;dt<256;++dt)D.push((dt+256).toString(16).substr(1));function Ba(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(D[e[l+0]]+D[e[l+1]]+D[e[l+2]]+D[e[l+3]]+"-"+D[e[l+4]]+D[e[l+5]]+"-"+D[e[l+6]]+D[e[l+7]]+"-"+D[e[l+8]]+D[e[l+9]]+"-"+D[e[l+10]]+D[e[l+11]]+D[e[l+12]]+D[e[l+13]]+D[e[l+14]]+D[e[l+15]]).toLowerCase();if(!Ea(n))throw TypeError("Stringified UUID is invalid");return n}function Ut(e,l,n){e=e||{};var f=e.random||(e.rng||Ma)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,l){n=n||0;for(var w=0;w<16;++w)l[n+w]=f[w];return l}return Ba(f)}const Pa=sa({name:"IndexPage",Components:{},data:function(){return{convo_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: `,summarization_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this into one sentance for me?\r
`,summarization_long_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following text?\r
`,summarization_dev_template:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following text?\r
`,generic_conversation_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: `,convo_json:{messages:[]},user_input:"",msg_sequence:2,toggle_spinner:!1,user_id:0,is_signed_in:!0,bot_avatar:"default",is_loading:!1,message_prefix:"",prompt_type:"generic_conversation",ai_model_engines:["text-davinci-002","text-curie-001","text-babbage-001","text-ada-001"],ai_model_engine:"text-davinci-002"}},computed:{getBotAvatarPath(){var e=this;return e.is_loading?"/icons/white_square.png":e.bot_avatar==="green_spark"?"/icons/green_spark.png":e.bot_avatar==="penguin"?"/icons/penguin.png":e.bot_avatar==="owley"?"/icons/owley.png":e.bot_avatar==="diaspora"?"/icons/diaspora.png":"/icons/default.png"}},created:function(){var e=this;localStorage.user_id&&(this.user_id=localStorage.user_id,this.is_signed_in=!0,e.getSettings()),e.loadTemplate("Conversation")},mounted(){},watch:{name(e){console.log("watcher firing"),localStorage.user_id=e}},methods:{radio:function(){var e=this;this.$q.dialog({title:"Choose a prompt template:",options:{type:"radio",model:"opt1",items:[{label:"Generic conversation (default)",value:"generic_conversation",color:"pink"},{label:"Summarization - into one sentance",value:"summarization",color:"pink"},{label:"Summarization",value:"summarization_long",color:"pink"},{label:"Summarization - software development",value:"summarization_dev",color:"pink"}]},cancel:!0,persistent:!0}).onOk(l=>{e.loadTemplate(l)}).onCancel(()=>{console.log(">>>> Cancel")}).onDismiss(()=>{})},loadTemplate:function(e){var l=this;e==="generic_conversation"?(l.prompt_type="generic_conversation",l.convo_template=l.generic_conversation_template):e==="summarization"?(l.prompt_type="summarization",l.convo_template=l.summarization_template,l.message_prefix=`Can you summarize this into one sentance for me?\r
`):e==="summarization_long"?(l.prompt_type="summarization",l.convo_template=l.summarization_long_template,l.message_prefix=`Can you summarize the following text?\r
`):e==="summarization_dev"&&(l.prompt_type="summarization",l.convo_template=l.summarization_dev_template,l.message_prefix=`Can you summarize the following text?\r
`),l.convo_json=Ta},add_quotes_for_summarization:function(e){return Qe.startsWith(e,'"')&&Qe.endsWith(e,'"')||Qe.startsWith(e,"'")&&Qe.endsWith(e,"'")?e:`"${e}"`},send_message:function(){var e=this;e.prompt_type=="summarization"&&(e.user_input=e.add_quotes_for_summarization(e.user_input));var l={messageId:Ut(),sender:"Human",message_text:e.message_prefix+e.user_input};l.messageId=l.messageId+1,e.convo_json.messages.push(l),e.toggle_spinner=!0,e.convo_template=String(e.convo_template)+String(e.user_input)+`\r
AI:`,e.user_input="";const n={"Content-Type":"application/json"};Nt.post("https://digissist-server.azurewebsites.net/completions",{engine:e.ai_model_engine,prompt:e.convo_template,max_tokens:150,temperature:.9,top_p:1,n:1,frequency_penalty:0,presence_penalty:.6,stream:!1,logprobs:null},{headers:n}).then(function(f){var w={messageId:Ut(),sender:"AI",message_text:String(f.data.choices[0].text)};e.toggle_spinner=!1,e.convo_json.messages.push(w),e.convo_template=String(e.convo_template)+String(w.message_text)+`\r
Human: `,console.log(":::Messages Obj:::"),console.log(e.convo_json),console.log(":::Messages str:::"),console.log(e.convo_template)}).catch(function(f){console.log(f),e.toggle_spinner=!1}).then(function(){e.prompt_type="generic_conversation",e.message_prefix=""})},getSettings:function(){var e=this;e.is_loading=!0,e.is_signed_in&&Nt.get(`https://digissist-server.azurewebsites.net/users/${localStorage.user_id}/settings`).then(function(l){e.bot_avatar=l.data.bot_avatar}).catch(function(l){console.log(l)}).then(function(){e.is_loading=!1})}},setup(){return{card:B(!1),show_settings:B(!1)}}}),mt=e=>(fa("data-v-3a725468"),e=e(),va(),e),Ra={class:"q-pa-md row justify-center"},Fa={style:{width:"100%","max-width":"500px"}},La=["src"],$a={src:"https://cdn.quasar.dev/img/boy-avatar.png"},Da={class:"q-pa-xs"},Na={style:{"max-width":"500px"}},ja=mt(()=>ne("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1)),Qa=Ge("Edit prompt"),Ua=Ge("Prompt Templates"),Ka=Ge("Settings"),Wa=mt(()=>ne("div",{class:"text-h6"},"Edit prompt text:",-1)),Xa=mt(()=>ne("div",{class:"text-h6"},"AI Settings:",-1)),Ya=Ge(" Davinci is the most powerful. Ada is the fastest. ");function Ga(e,l,n,f,w,u){return ot(),$t("div",Ra,[ne("div",Fa,[V(it,{class:"my-card"},{default:H(()=>[V(qe,null,{default:H(()=>[(ot(!0),$t(ca,null,da(e.convo_json.messages,m=>(ot(),ma(st,{key:m.messageId,name:m.sender,text:[m.message_text],sent:m.sender!="AI","bg-color":m.sender=="AI"?"pink":"light-grey","text-color":m.sender=="AI"?"white":"black"},{avatar:H(d=>[ue(V(Et,{size:"58px",props:d,class:"q-mx-xs"},{default:H(()=>[ue(ne("img",{src:e.getBotAvatarPath},null,8,La),[[Te,m.sender=="AI"]]),ue(ne("img",$a,null,512),[[Te,m.sender!="AI"]])]),_:2},1032,["props"]),[[Te,!e.is_loading]]),ue(ne("div",Da,[V(ga,{color:"pink",size:"2em"})],512),[[Te,e.is_loading]])]),_:2},1032,["name","text","sent","bg-color","text-color"]))),128)),ue(V(st,{name:"AI",avatar:e.getBotAvatarPath,"bg-color":"pink","text-color":"white"},{default:H(()=>[V(Sa,{size:"2rem"})]),_:1},8,["avatar"]),[[Te,e.toggle_spinner]])]),_:1}),V(ut),V(qe,null,{default:H(()=>[ne("div",Na,[ue(V(st,{style:{"font-style":"italic"},size:"10",name:"Human",text:[e.message_prefix],"text-color":"grey-7",sent:""},{avatar:H(()=>[V(Et,{size:"58px",class:"q-mx-xs"},{default:H(()=>[ja]),_:1})]),_:1},8,["text"]),[[Te,e.prompt_type=="summarization"]]),V(Dt,{modelValue:e.user_input,"onUpdate:modelValue":l[0]||(l[0]=m=>e.user_input=m),outlined:"",color:"pink",autogrow:"",disable:e.toggle_spinner,placeholder:e.prompt_type=="summarization"?"[Insert Text Here]":"","placeholder-color":"orange"},{after:H(()=>[V(He,{round:"",dense:"",flat:"",icon:"send",onClick:e.send_message},null,8,["onClick"])]),_:1},8,["modelValue","disable","placeholder"])])]),_:1}),V(rt,{align:"around"},{default:H(()=>[V(He,{outline:"",color:"pink",icon:"edit_note",onClick:l[1]||(l[1]=m=>e.card=!0)},{default:H(()=>[Qa]),_:1}),V(He,{outline:"",color:"pink",icon:"collections_bookmark",onClick:e.radio},{default:H(()=>[Ua]),_:1},8,["onClick"]),V(He,{outline:"",color:"pink",icon:"settings",onClick:l[2]||(l[2]=m=>e.show_settings=!0)},{default:H(()=>[Ka]),_:1}),V(ft,{modelValue:e.card,"onUpdate:modelValue":l[4]||(l[4]=m=>e.card=m)},{default:H(()=>[V(it,{class:"my-card"},{default:H(()=>[V(qe,null,{default:H(()=>[Wa]),_:1}),V(qe,null,{default:H(()=>[ne("div",null,[V(Dt,{modelValue:e.convo_template,"onUpdate:modelValue":l[3]||(l[3]=m=>e.convo_template=m),outlined:"",color:"pink",type:"textarea",autogrow:"",style:{width:"500px"}},null,8,["modelValue"])])]),_:1}),V(ut),V(rt,{align:"right"},{default:H(()=>[ue(V(He,{outline:"",color:"pink",label:"Okay"},null,512),[[Bt]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(ft,{modelValue:e.show_settings,"onUpdate:modelValue":l[6]||(l[6]=m=>e.show_settings=m)},{default:H(()=>[V(it,{class:"my-card",style:{width:"400px"}},{default:H(()=>[V(qe,null,{default:H(()=>[Xa]),_:1}),V(qe,null,{default:H(()=>[ne("div",null,[V(Aa,{outlined:"",modelValue:e.ai_model_engine,"onUpdate:modelValue":l[5]||(l[5]=m=>e.ai_model_engine=m),options:e.ai_model_engines,label:"GPT-3 model engine",color:"pink"},{default:H(()=>[V(pa,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:H(()=>[Ya]),_:1})]),_:1},8,["modelValue","options"])])]),_:1}),V(ut),V(rt,{align:"right"},{default:H(()=>[ue(V(He,{outline:"",color:"pink",label:"Okay"},null,512),[[Bt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])}var an=ra(Pa,[["render",Ga],["__scopeId","data-v-3a725468"]]);export{an as default};
