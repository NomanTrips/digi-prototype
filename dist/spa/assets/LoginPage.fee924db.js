import{_ as m,X as p,a4 as c,Y as f,aV as _,a5 as n,K as g,a6 as w,a0 as s,$ as i,ac as h,aW as v,d as r,a2 as d,a3 as y,ad as b,aY as l,Q as k}from"./index.be88c086.js";import{Q as S,a as P}from"./QForm.bf64b049.js";import{a as V}from"./index.becf6c0c.js";const Q=p({name:"LoginPage",data:function(){return{username:"",password:"",is_failure:!1,err_msg:"",isPwd:!0}},created:function(){},methods:{onSubmit:function(){var e=this;e.is_failure=!1;const t={"Content-Type":"application/json"};V.post("https://digissist-server.azurewebsites.net/users/login",{username:e.username,password:e.password},{headers:t}).then(function(o){console.log(o),o.status===200?(console.log(`login resp data:  ${o.data}`),localStorage.user_id=o.data.user_id,localStorage.token=o.data.token,localStorage.username=o.data.username,e.$router.push("/")):(e.is_failure=!0,e.err_msg="Unknown")}).catch(function(o){console.log(o),e.is_failure=!0,e.err_msg="error"})}}}),$={class:"q-pa-md q-gutter-sm"},q={class:"q-pa-md row justify-center"},C={style:{width:"100%","max-width":"500px"}},B={class:"row"},U={class:"q-pl-xs"},z={class:"q-pl-xs"},D={class:"row"},F={class:"q-pa-sm"},L=d("Forgot password?");function N(e,t,o,j,x,I){const u=c("router-link");return f(),_(v,null,[n("div",$,[g(s(S,{"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:i(()=>[s(r,{flat:"",label:"Dismiss"})]),default:i(()=>[d(" Sign in failed: "+y()+" ",1)]),_:1},512),[[w,e.is_failure]])]),n("div",q,[n("div",C,[s(h,{class:"my-card"},{default:i(()=>[s(b,null,{default:i(()=>[s(P,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:i(()=>[s(l,{filled:"",color:"pink",modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=a=>e.username=a),label:"Username","lazy-rules":"",rules:[a=>a&&a.length>0||"Please enter your username"]},null,8,["modelValue","rules"]),s(l,{filled:"",type:e.isPwd?"password":"text",color:"pink",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.password=a),label:"Password","lazy-rules":"",rules:[a=>a!==null&&a!==""||"Please type your password"]},{append:i(()=>[s(k,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),n("div",B,[n("div",U,[s(r,{outline:"",label:"Login",type:"submit",color:"pink"})]),n("div",z,[s(r,{outline:"",label:"Signup",color:"pink",to:"/signup"})])])]),_:1},8,["onSubmit"]),n("div",D,[n("div",F,[s(u,{to:"/resetpassword"},{default:i(()=>[L]),_:1})])])]),_:1})]),_:1})])])],64)}var K=m(Q,[["render",N]]);export{K as default};
