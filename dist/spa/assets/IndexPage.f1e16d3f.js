import{Q as P,a as J,C as K}from"./ClosePopup.1a79b295.js";import{c as ee,a as S,h as m,aE as re,aF as ie,aG as le,Y as te,_ as ae,Z as h,aH as _,aI as k,aJ as V,L as d,a8 as p,a7 as l,a4 as A,a1 as o,a0 as r,e as b,aK as ne,aL as oe,r as E,a5 as ue,ad as me,af as O,ag as x,ac as $,aM as Y,a3 as v,ah as R,ae as U,a6 as X,ab as W,$ as L,aa as N}from"./index.ca6ef357.js";import{Q as de,a as ce}from"./QSelect.1e5746d9.js";import{d as pe,a as T,Q as q,b as D}from"./position-engine.ace2d806.js";import{a as B}from"./index.becf6c0c.js";import{_ as I}from"./lodash.e6c87188.js";import{l as ge}from"./vs2015.c43dc632.js";import"./QMenu.87013a71.js";var M=ee({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const n=S(()=>e.sent===!0?"sent":"received"),s=S(()=>`q-message-text-content q-message-text-content--${n.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),i=S(()=>`q-message-text q-message-text--${n.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),u=S(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),c=S(()=>e.size!==void 0?`col-${e.size}`:""),a=S(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function f(w){return t.stamp!==void 0?[w,m("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[w,m("div",{class:"q-message-stamp",[a.value.stamp]:e.stamp})]:[w]}function y(w,C){const z=C===!0?w.length>1?H=>H:H=>m("div",[H]):H=>m("div",{[a.value.msg]:H});return w.map((H,se)=>m("div",{key:se,class:i.value},[m("div",{class:s.value},f(z(H)))]))}return()=>{const w=[];t.avatar!==void 0?w.push(t.avatar()):e.avatar!==void 0&&w.push(m("img",{class:`q-message-avatar q-message-avatar--${n.value}`,src:e.avatar,"aria-hidden":"true"}));const C=[];t.name!==void 0?C.push(m("div",{class:`q-message-name q-message-name--${n.value}`},t.name())):e.name!==void 0&&C.push(m("div",{class:`q-message-name q-message-name--${n.value}`,[a.value.name]:e.name})),t.default!==void 0?C.push(y(re(t.default()),!0)):e.text!==void 0&&C.push(y(e.text)),w.push(m("div",{class:c.value},C));const z=[];return t.label!==void 0?z.push(m("div",{class:"q-message-label"},t.label())):e.label!==void 0&&z.push(m("div",{class:"q-message-label",[a.value.label]:e.label})),z.push(m("div",{class:u.value},w)),m("div",{class:`q-message q-message-${n.value}`},z)}}});const he=[m("circle",{cx:"15",cy:"15",r:"15"},[m("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),m("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[m("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),m("circle",{cx:"105",cy:"15",r:"15"},[m("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var fe=ee({name:"QSpinnerDots",props:ie,setup(e){const{cSize:t,classes:n}=le(e);return()=>m("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},he)}});const _e=[{messageId:1,sender:"Human",message_text:"Hello, who are you?",is_code:!1},{messageId:2,sender:"AI",message_text:"I am an AI created by OpenAI. How can I help you today?",is_code:!1}];var Z={messages:_e},Q,ve=new Uint8Array(16);function ye(){if(!Q&&(Q=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q(ve)}var we=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function be(e){return typeof e=="string"&&we.test(e)}var g=[];for(var G=0;G<256;++G)g.push((G+256).toString(16).substr(1));function Ie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(g[e[t+0]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]]).toLowerCase();if(!be(n))throw TypeError("Stringified UUID is invalid");return n}function F(e,t,n){e=e||{};var s=e.random||(e.rng||ye)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=s[i];return t}return Ie(s)}const xe=te({name:"MessageBlock",props:{message:{type:String,required:!0}},data:function(){return{messageSegments:[],tableWidth:475,messageContainsCode:!1,displayRaw:!1}},methods:{highlightCode(){document.querySelectorAll("code").forEach(e=>{ge.highlightBlock(e)})},countOccurrences(e){let t=/```/g,n=e.match(t);return n=n!=null?n:[],n.length},isEven(e){return e%2===0},strToArr(e){var t=[],n="",s=!1;for(let i=0;i<e.length;i++)if(e[i]=="`"&&i+3<=e.length&&e[i+1]=="`"&&e[i+2]=="`"){if(this.messageContainsCode=!0,t.length===0&&!this.isEven(this.countOccurrences(e))){let u=/([\#\{\(;])\S*/g,c=e.slice(0,i).match(u);c=c!=null?c:[],c.length>0&&(s=!0)}t.push({text:n,isCode:s,id:i}),n="",s=!s,i=i+2}else n=n+e[i];if(n.length>0&&t.push({text:n,isCode:s,id:999}),!this.isEven(this.countOccurrences(e))){let i=/([\#\{\(;])\S*/g,u=t[t.length-1].text.match(i);u=u!=null?u:[],u.length>0&&(t[t.length-1].isCode=!0)}return t}},mounted(){this.messageSegments=this.strToArr(this.message),this.$q.screen.width<600?this.tableWidth=250:this.tableWidth=475,setTimeout(()=>{this.highlightCode()},5)}}),Ae=e=>(ne("data-v-ff158940"),e=e(),oe(),e),Ce={key:0,style:{"margin-top":"8px",width:"475px","border-spacing":"0px"}},He=Ae(()=>l("tr",{style:{"padding-top":"5px"}},[l("th",{style:{color:"black",margin:"0px",padding:"0px 0px 0px 5px","font-size":"12px","background-color":"#c9c6c3","border-top-left-radius":"5px","border-top-right-radius":"5px",display:"flex","justify-content":"space-between","align-items":"center"}},[l("div",null,"Code:")])],-1)),ke={style:{margin:"0px",padding:"0px"}},ze={style:{width:"475px",margin:"0px",padding:"0px"}},Se={key:1};function $e(e,t,n,s,i,u){return h(),_(k,null,[(h(!0),_(k,null,V(e.messageSegments,c=>d((h(),_("div",{key:c.id,style:{"white-space":"pre-wrap","margin-bottom":"5px"}},[c.isCode?(h(),_("table",Ce,[He,l("tr",null,[l("td",ke,[l("pre",ze,[l("code",null,A(c.text),1)])])])])):(h(),_("div",Se,A(c.text),1))])),[[p,!e.displayRaw]])),128)),d(l("div",{style:{"white-space":"pre-wrap"}},A(e.message),513),[[p,e.displayRaw]]),d(o(b,{onClick:t[0]||(t[0]=c=>e.displayRaw=!e.displayRaw),flat:"",size:"xs",style:{color:"black",position:"absolute",right:"5px",bottom:"5px"}},{default:r(()=>[d(l("span",null,"Show raw",512),[[p,!e.displayRaw]]),d(l("span",null,"Show formatted",512),[[p,e.displayRaw]])]),_:1},512),[[p,e.messageContainsCode]])],64)}var Te=ae(xe,[["render",$e],["__scopeId","data-v-ff158940"]]);const qe=te({name:"IndexPage",components:{MessageBlock:Te},data:function(){return{summarization_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this into one sentance for me?\r
`,summarization_long_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following text?\r
`,summarization_dev_template:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following text?\r
`,generic_conversation_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: `,summarization_email:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this email?\r
`,summarization_bug:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this bug?\r
`,internet_comment:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this internet comment?\r
`,email_writing:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you re-write this email more succinctly?\r
`,software_requirements_writing:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you re-write this software requirment more succinctly?\r
`,summarization_ticket:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize what this ticket is asking for?\r
`,convo_json:{},user_input:"",msg_sequence:2,toggle_spinner:!1,user_id:24,is_signed_in:!0,avatar:null,bot_avatar:null,primary_color:null,is_loading:!1,message_prefix:"",prompt_type:"generic_conversation",ai_model_engines:["gpt-3.5-turbo","text-davinci-003","text-davinci-002","text-curie-001","text-babbage-001","text-ada-001"],ai_model_engine:"text-davinci-003",showTokenWarning:!1,conversation_templates:[{label:"Conversation (default)",value:"generic_conversation",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: `,prefix:""},{label:"Summarize into one sentance",value:"summarization",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this into one sentance for me?\r
`,prefix:`Can you summarize this into one sentance for me?\r
`},{label:"Summarization",value:"summarization_long",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following text?\r
`,prefix:`Can you summarize the following text?\r
`}],internet_task_templates:[{label:"Email summarization",value:"summarization_email",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize the following email?\r
`,prefix:`Can you summarize the following email?\r
`},{label:"Email writing help",value:"email_writing",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you re-write the following email body more succinctly?\r
`,prefix:`Can you re-write the following email body more succinctly?\r
`},{label:"Summarize internet comment",value:"internet_comment",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this internet comment?\r
`,prefix:`Can you summarize this internet comment?\r
`}],digital_work_templates:[{label:"Bug summarization",value:"summarization_bug",color:"pink",text:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize this bug?\r
`,prefix:`Can you summarize this bug?\r
`},{label:"Customer ticket summarization",value:"summarization_ticket",color:"pink",text:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you summarize what this ticket is asking for?\r
`,prefix:`Can you summarize what this ticket is asking for?\r
`},{label:"Software requirement writing",value:"software_requirement_writing",color:"pink",text:`The following is a conversation with an AI assistant. The conversation is about software development.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: Can you re-write the following software requirement more succinctly?\r
`,prefix:`Can you re-write the following software requirement more succinctly?\r
`}],selected_template:{label:"Conversation (default)",value:"generic_conversation",color:"pink",text:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
Human: `,prefix:""},selected_template_key:"generic_conversation",show_prefix:!1,premium_tf:!1,error_message:"",is_error:!1,messages:[{role:"system",content:"You are ChatGPT, a large language model trained by OpenAI. Answer as concisely as possible."},{role:"user",content:"Hello, who are you?"},{role:"assistant",content:"I am ChatGPT created by OpenAI. How can I help you today?"}],token_count:0,temp_account_tf:!0,code:"body { background: blue; }",messages_html:[],htmlTester:`<pre><code>{{{<html>dis
<div>Moar</div></html>}}}</code></pre>`}},computed:{screenSize(){return this.$q.screen.width},cardWidth(){return this.$q.screen.width<600?350:600},getBotAvatarPath(){var e=this;return e.bot_avatar===null?"/icons/white_square.png":e.bot_avatar==="green_spark"?"/icons/green_spark.png":e.bot_avatar==="penguin"?"/icons/penguin.png":e.bot_avatar==="default"?"/icons/default.png":e.bot_avatar==="diaspora"?"/icons/diaspora.png":e.bot_avatar==="big_un"?"/icons/big_un.png":e.bot_avatar==="mantis"?"/icons/mantis.png":e.bot_avatar==="orphan"?"/icons/orphan.png":"/icons/owley.png"},getHumanAvatarPath(){var e=this;return e.avatar===null?"/icons/white_square.png":e.avatar==="human_2"?"/icons/human_2.png":e.avatar==="human_3"?"/icons/human_3.png":e.avatar==="human_4"?"/icons/human_4.png":e.avatar==="human_5"?"/icons/human_5.png":"/icons/human_1.png"}},created:function(){var e=this;if(e.convo_json=I.cloneDeep(Z),e.ai_model_engine="gpt-3.5-turbo",localStorage.getItem("bot_avatar")!=null?e.bot_avatar=localStorage.bot_avatar:e.bot_avatar="owley",localStorage.getItem("avatar")!=null?e.avatar=localStorage.avatar:e.avatar="human_1",localStorage.getItem("primary_color")!=null?e.primary_color=localStorage.primary_color:e.primary_color="cyan",localStorage.getItem("temp_account_tf")!=null?e.temp_account_tf=localStorage.temp_account_tf:e.temp_account_tf=!0,localStorage.user_id)this.user_id=localStorage.user_id,this.is_signed_in=!0,e.getSettings();else{var t=F();e.createUser("temp","user","t",t,t,`${t}@digissist.io`,1)}document.addEventListener("keydown",n);function n(s){s.code==="Enter"&&e.user_input!=""&&(e.$refs.userinput.blur(),e.ai_model_engine!="gpt-3.5-turbo"?e.send_message():e.send_message_gpt_turbo())}localStorage.premium_tf==="true"&&(e.premium_tf=!0),e.token_count=42},mounted(){},watch:{ai_model_engine(e){var t=this;e=="gpt-3.5-turbo"&&(t.token_count=42)},selected_template_key(e){var t=this,n=void 0;n=I.find(t.conversation_templates,function(s){return s.value===e}),n!=null&&(t.selected_template=n),n=I.find(t.internet_task_templates,function(s){return s.value===e}),n!=null&&(t.selected_template=n),n=I.find(t.digital_work_templates,function(s){return s.value===e}),n!=null&&(t.selected_template=n),t.selected_template.prefix!=""&&(t.show_prefix=!0),t.show_templates=!1,t.convo_json=I.cloneDeep(Z)},user_input(e){var t=this;e!=null&&(e.length>5e3?(t.is_error=!0,t.error_message="Input is too big. Try something smaller"):(t.is_error=!1,t.error_message="")),t.token_count+Math.round(t.user_input.length/4)>4096&&(t.is_error=!0,t.error_message="Token count reached, please refresh the page to start a new conversation.")},name(e){console.log("watcher firing"),localStorage.user_id=e}},methods:{escapeHtml(e){var t=new Option(e).innerHTML;return t},escapeHtmlOutsideTables(e){var t=this;const n=/(<\/?table.*?>)|(<(?!\/?table)[^>]+>)|([^<]+)/gi;let s,i="";for(;s=n.exec(e);)s[1]?i+=s[1]:s[2]?i+=s[2]:i+=t.escapeHtml(s[3]);return i},updateCodeBlocks(){document.querySelectorAll("code").forEach(e=>{hljs.highlightBlock(e)})},escapeIfHtml(e){var t=this;return e.includes("html")||e.includes("<template")||e.includes("<script")?t.escapeHtml(e):e},wrapCodeBlocks(e){var t;this.$q.screen.width<600?t=250:t=475;try{var n=`<table style="margin-top:8px;width:${t}px;border-spacing:0px;"><tr style="padding-top:5px;"><th style="color:black;margin:0px;padding:0px 0px 0px 5px;font-size:12px;background-color:#c9c6c3;border-top-left-radius: 5px;border-top-right-radius: 5px;display:flex;justify-content:space-between;align-items: center;"><div>Code:</div><div style="text-align:right"></div></th></tr><tr ><td style="margin:0px;padding:0px;"><pre style="width:${t}px;margin:0px;padding:0px;"><code>`,s="</code></pre></td></tr></table>";const u=new RegExp("`{0,3}([\\s\\S]*?)`{0,3}","g");var i=e.replace(u,(c,a)=>`${n}${a}${s}`);return i}catch{return e}},removeTags(e){return e.replace(/<\/?pre[^>]*>|<\/?code>/gi,"")},updateClipboard(e){const t=new RegExp("```([\\s\\S]*?)```","g"),n=e.match(t);var s="";if(n!=null)for(var i=0;i<n.length;i++)s+=n[i],s=s.replace(t,(c,a)=>`${a}

`);var u="";s!=""?u=s:u=e,navigator.clipboard.writeText(u).then(()=>{},()=>{})},doesStrContainProgrammingChars(e){let t=/([\#\{\(;])\S*/g,n=e.match(t);return console.log(n),n!=null&&n.length>1},loadTemplate:function(e){var t=this;t.prompt_type=e.value,t.selected_template.text=e.text,t.message_prefix=e.prefix,template_name==="generic_conversation"?(t.prompt_type="generic_conversation",t.selected_template.text=t.generic_conversation_template):template_name==="summarization"?(t.prompt_type="summarization",t.selected_template.text=t.summarization_template,t.message_prefix=`Can you summarize this into one sentance for me?\r
`):template_name==="summarization_long"?(t.prompt_type="summarization",t.selected_template.text=t.summarization_long_template,t.message_prefix=`Can you summarize the following text?\r
`):template_name==="summarization_dev"&&(t.prompt_type="summarization",t.selected_template.text=t.summarization_dev_template,t.message_prefix=`Can you summarize the following text?\r
`)},add_quotes_for_summarization:function(e){return I.startsWith(e,'"')&&I.endsWith(e,'"')||I.startsWith(e,"'")&&I.endsWith(e,"'")?e:`"${e}"`},logInput:function(){var e=this;console.log(e.user_input)},send_message_gpt_turbo:function(){var e=this;e.toggle_spinner=!0,e.messages.push({role:"user",content:e.user_input}),e.user_input="",B.post("https://digissist-server.azurewebsites.net/completions/v2",{model:e.ai_model_engine,messages:e.messages,max_tokens:200,temperature:.9,top_p:1,n:1,frequency_penalty:0,presence_penalty:.6,stream:!1,user:String(e.user_id)},{headers:{Authorization:"Bearer "+localStorage.token,"Content-Type":"application/json"}}).then(function(t){var n=t.data.choices[0].message.content;e.messages.push({role:"assistant",content:n}),document.getElementById("inputbox").scrollIntoView(),e.token_count=t.data.usage.total_tokens}).catch(function(t){console.log(t),e.is_error=!0,e.error_message=t.response.data}).then(function(){e.toggle_spinner=!1})},send_message:function(){var e=this;e.show_prefix&&(e.user_input=e.add_quotes_for_summarization(e.user_input),e.message_prefix=e.selected_template.prefix,e.show_prefix=!1);var t={messageId:F(),sender:"Human",message_text:e.message_prefix+e.user_input};e.message_prefix="",t.messageId=t.messageId+1,e.convo_json.messages.push(t),e.toggle_spinner=!0,e.selected_template.text=String(e.selected_template.text)+String(e.user_input)+`\r
AI:`,e.user_input="",B.post("https://digissist-server.azurewebsites.net/completions",{model:e.ai_model_engine,prompt:e.selected_template.text,max_tokens:150,temperature:.9,top_p:1,n:1,frequency_penalty:0,presence_penalty:.6,stream:!1,logprobs:null,user:String(e.user_id)},{headers:{Authorization:"Bearer "+localStorage.token,"Content-Type":"application/json"}}).then(function(n){var s={messageId:F(),sender:"AI",message_text:String(n.data.choices[0].text),is_code:!1};if(e.token_count=n.data.usage.total_tokens,e.toggle_spinner=!1,e.selected_template.text=String(e.selected_template.text)+String(s.message_text)+`\r
Human: `,e.doesStrContainProgrammingChars(s.message_text)){s.is_code=!0;var i=/\b(def|function|public|var|import|let)\b/,u=s.message_text.match(i);u?(s.message_text=s.message_text.slice(0,u.index)+'<pre style="white-space:pre-wrap;"><code>'+s.message_text.slice(u.index),s.message_text+="</code></pre>"):s.message_text=`<pre style="white-space:pre-wrap;"><code>${s.message_text}</code></pre>`}e.convo_json.messages.push(s),console.log(":::Messages Obj:::"),console.log(e.convo_json),console.log(":::Messages str:::"),console.log(e.selected_template.text),document.getElementById("inputbox").scrollIntoView()}).catch(function(n){console.log(n),n.response.status===429?(e.error_message=n.response.data,e.is_error=!0):n.response.status===500&&n.response.data==="Unsafe content"&&(e.error_message="We detected inappropriate content in the output. Please refresh the page and try a new conversation.",e.is_error=!0)}).then(function(){e.toggle_spinner=!1,e.prompt_type="generic_conversation",e.message_prefix=""})},getSettings:function(){var e=this;e.is_loading=!0,e.is_signed_in&&B.get(`https://digissist-server.azurewebsites.net/users/${localStorage.user_id}/settings`,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){e.bot_avatar=t.data.bot_avatar,e.avatar=t.data.avatar,e.primary_color=t.data.primary_color,localStorage.bot_avatar=t.data.bot_avatar,localStorage.avatar=t.data.avatar,localStorage.primary_color=t.data.primary_color}).catch(function(t){console.log(t),t.response.status==403&&(localStorage.removeItem("user_id"),localStorage.removeItem("token"),e.is_signed_in=!1,e.$router.push("/login"))}).then(function(){e.is_loading=!1})},createUser:function(e,t,n,s,i,u,c){var a=this;a.is_failure=!1,a.dob="19880719",console.log(a.dob);const f={"Content-Type":"application/json"};B.post("https://digissist-server.azurewebsites.net/users/create",{first_name:e,middle_initial:n,last_name:t,date_of_birth:a.dob,username:s,password:i,email:u,temp_account_tf:c},{headers:f}).then(function(y){console.log(y),y.status===200?(localStorage.user_id=y.data.user_id,localStorage.token=y.data.token,localStorage.username=y.data.username,localStorage.temp_account_tf=y.data.temp_account_tf,a.emitter.emit("setting_change",{is_setting_changed:!0,primary_color:a.primary_color,is_signed_in:!0}),a.$router.push("/")):a.is_failure=!0}).catch(function(y){console.log(y),a.is_failure=!0})}},setup(){return{card:E(!1),show_settings:E(!1),show_templates:E(!1)}}}),j=e=>(ne("data-v-66b1fd74"),e=e(),oe(),e),Ve={class:"q-pa-xs",style:{display:"flex","justify-content":"center","align-items":"center",height:"auto"}},Oe={class:"col-shrink"},Be=["src"],Me=["v-show","src"],Qe={class:"col-auto"},je={class:"col-shrink"},Pe=["src"],Ee=["v-show","src"],Re={class:"col-auto"},Ue={style:{"max-width":"600px"},id:"inputbox"},We=["src"],Le={class:"row justify-center",style:{width:"100%","text-align":"center"}},Ne={class:"col"},De=v("Tasks"),Ge=v("View prompt"),Fe=v("AI Settings"),Je=v("Conversation token limit: 1 token is ~ 4 characters"),Ke=j(()=>l("div",{class:"row justify-center text-caption",style:{color:"goldenrod"}}," Interacting with an AI system: verify the output carefully. ",-1)),Ye=j(()=>l("div",{class:"text-h6"},"Prompt text:",-1)),Xe=j(()=>l("div",{class:"text-h6"},"AI Settings:",-1)),Ze=v(" gpt-3.5 is the most capable. Ada is the fastest. "),et=j(()=>l("div",{class:"text-h6"},"Choose a task:",-1)),tt=v("General"),at=v("Internet tasks"),nt=v("Software development");function ot(e,t,n,s,i,u){const c=ue("MessageBlock");return h(),_("div",Ve,[o(O,{class:"my-card",flat:"",style:me({width:e.cardWidth+"px","margin-bottom":"10%","margin-top":"5%"})},{default:r(()=>[o(x,{style:{padding:"10px"}},{default:r(()=>[(h(!0),_(k,null,V(e.convo_json.messages,a=>d((h(),_("div",{key:a.messageId,class:X(a.sender=="AI"?"row justify-start no-wrap":"row justify-end no-wrap")},[l("div",Oe,[o(M,{name:a.sender,text:[a.message_text],sent:a.sender!="AI","bg-color":a.sender=="AI"?e.primary_color:"light-grey","text-color":a.sender=="AI"?"white":"black","text-html":a.is_code},{avatar:r(f=>[o(P,{size:e.screenSize>600?"58px":"48px",props:f,class:"q-mx-xs"},{default:r(()=>[d(l("img",{src:e.getBotAvatarPath},null,8,Be),[[p,a.sender=="AI"]]),l("img",{"v-show":a.sender!="AI",src:e.getHumanAvatarPath},null,8,Me)]),_:2},1032,["size","props"])]),_:2},1032,["name","text","sent","bg-color","text-color","text-html"])]),d(l("div",Qe,[o(b,{flat:"",round:"",size:"xs",icon:"content_copy",align:"center",style:{width:"16px",height:"16px","margin-top":"20px"},onClick:f=>e.updateClipboard(a.message_text)},null,8,["onClick"])],512),[[p,a.sender=="AI"&&e.screenSize>600]])],2)),[[p,e.ai_model_engine!="gpt-3.5-turbo"]])),128)),(h(!0),_(k,null,V(e.messages,a=>d((h(),_("div",{key:a.content,class:X(a.role=="assistant"?"row justify-start no-wrap":"row justify-end no-wrap")},[l("div",je,[d(o(M,{name:a.role=="assistant"?"AI":"Me",sent:a.role!="assistant","bg-color":a.role=="assistant"?e.primary_color:"light-grey","text-color":a.role=="assistant"?"white":"black"},{default:r(()=>[o(c,{message:a.content},null,8,["message"])]),avatar:r(f=>[o(P,{size:e.screenSize>600?"58px":"48px",props:f,class:"q-mx-xs"},{default:r(()=>[d(l("img",{src:e.getBotAvatarPath},null,8,Pe),[[p,a.role=="assistant"]]),l("img",{"v-show":a.role!="assistant",src:e.getHumanAvatarPath},null,8,Ee)]),_:2},1032,["size","props"])]),_:2},1032,["name","sent","bg-color","text-color"]),[[p,a.role!="system"]])]),d(l("div",Re,[o(b,{flat:"",round:"",size:"xs",icon:"content_copy",align:"center",style:{width:"16px",height:"16px","margin-top":"20px"},onClick:f=>e.updateClipboard(a.content)},null,8,["onClick"])],512),[[p,a.role=="assistant"&&e.screenSize>600]])],2)),[[p,e.ai_model_engine=="gpt-3.5-turbo"]])),128)),d(o(M,{name:"AI",avatar:e.getBotAvatarPath,"bg-color":e.primary_color,"text-color":"white"},{default:r(()=>[o(fe,{size:"2rem"})]),_:1},8,["avatar","bg-color"]),[[p,e.toggle_spinner]])]),_:1}),o($),o(x,{style:{padding:"8px"}},{default:r(()=>[l("div",Ue,[d(o(M,{style:{"font-style":"italic"},size:"10",name:"Human",text:[e.selected_template.prefix],"text-color":"grey-7",sent:""},{avatar:r(()=>[o(P,{size:e.screenSize>600?"58px":"38px",class:"q-mx-xs"},{default:r(()=>[l("img",{src:e.getHumanAvatarPath},null,8,We)]),_:1},8,["size"])]),_:1},8,["text"]),[[p,e.show_prefix]]),o(Y,{modelValue:e.user_input,"onUpdate:modelValue":t[0]||(t[0]=a=>e.user_input=a),outlined:"",color:e.primary_color,autogrow:"",disable:e.toggle_spinner,placeholder:e.show_prefix?"[Insert Text Here]":"",ref:"userinput",error:e.is_error,"hide-bottom-space":"",onClear:t[1]||(t[1]=a=>e.is_error=!1)},{append:r(()=>[d(o(b,{size:e.screenSize>600?"md":"sm",round:"",dense:"",flat:"",icon:"send",onClick:e.send_message,disable:e.is_error},null,8,["size","onClick","disable"]),[[p,e.ai_model_engine!="gpt-3.5-turbo"]]),d(o(b,{size:e.screenSize>600?"md":"sm",round:"",dense:"",flat:"",icon:"send",onClick:e.send_message_gpt_turbo,disable:e.is_error},null,8,["size","onClick","disable"]),[[p,e.ai_model_engine=="gpt-3.5-turbo"]])]),error:r(()=>[v(A(e.error_message),1)]),_:1},8,["modelValue","color","disable","placeholder","error"])])]),_:1}),o(R,{align:"around"},{default:r(()=>[l("div",Le,[l("div",Ne,[d(o(b,{size:e.screenSize>600?"md":"sm",outline:"",color:e.primary_color,icon:"psychology",onClick:t[2]||(t[2]=a=>e.show_templates=!0),class:"q-mx-xs q-mb-md"},{default:r(()=>[De]),_:1},8,["size","color"]),[[p,e.ai_model_engine!="gpt-3.5-turbo"]]),d(o(b,{size:e.screenSize>600?"md":"sm",outline:"",color:e.primary_color,icon:"text_snippet",onClick:t[3]||(t[3]=a=>e.card=!0),class:"q-mx-xs q-mb-md"},{default:r(()=>[Ge]),_:1},8,["size","color"]),[[p,!1]]),o(b,{size:"sm",outline:"",color:e.primary_color,icon:"settings",onClick:t[4]||(t[4]=a=>e.show_settings=!0),class:"q-mx-xs q-mb-md"},{default:r(()=>[Fe]),_:1},8,["color"]),o(de,{dense:"",class:"q-mx-xs q-mb-md",color:e.token_count+Math.round(e.user_input.length/4)>4096?e.primary_color:"light-grey","text-color":e.token_count+Math.round(e.user_input.length/4)>4096?"white":"grey-6",size:e.screenSize>600?"md":"sm"},{default:r(()=>[v(A(e.token_count+Math.round(e.user_input.length/4))+"/4096 ",1),o(J,{anchor:"bottom right"},{default:r(()=>[Je]),_:1})]),_:1},8,["color","text-color","size"])])]),Ke,o(U,{modelValue:e.card,"onUpdate:modelValue":t[7]||(t[7]=a=>e.card=a)},{default:r(()=>[o(O,{class:"my-card",style:{width:"400px"}},{default:r(()=>[o(x,null,{default:r(()=>[Ye]),_:1}),o(x,null,{default:r(()=>[l("div",null,[o(Y,{modelValue:e.selected_template.text,"onUpdate:modelValue":t[5]||(t[5]=a=>e.selected_template.text=a),outlined:"",color:e.primary_color,type:"textarea",autogrow:"",onFocus:t[6]||(t[6]=a=>e.user_input=""),disable:e.user_id!=17},null,8,["modelValue","color","disable"])])]),_:1}),o($),o(R,{align:"right"},{default:r(()=>[d(o(b,{outline:"",color:e.primary_color,label:"Okay"},null,8,["color"]),[[K]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(U,{modelValue:e.show_settings,"onUpdate:modelValue":t[9]||(t[9]=a=>e.show_settings=a)},{default:r(()=>[o(O,{class:"my-card",style:{width:"400px"}},{default:r(()=>[o(x,null,{default:r(()=>[Xe]),_:1}),o(x,null,{default:r(()=>[l("div",null,[o(ce,{outlined:"",modelValue:e.ai_model_engine,"onUpdate:modelValue":t[8]||(t[8]=a=>e.ai_model_engine=a),options:e.ai_model_engines,label:"GPT-3 model engine",color:e.primary_color,"bottom-slots":"","hide-hint":e.premium_tf},{default:r(()=>[o(J,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:r(()=>[Ze]),_:1})]),_:1},8,["modelValue","options","color","hide-hint"])])]),_:1}),o($),o(R,{align:"right"},{default:r(()=>[d(o(b,{outline:"",color:e.primary_color,label:"Okay"},null,8,["color"]),[[K]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(U,{modelValue:e.show_templates,"onUpdate:modelValue":t[13]||(t[13]=a=>e.show_templates=a)},{default:r(()=>[o(O,{class:"my-card",style:{width:"400px"}},{default:r(()=>[o(x,null,{default:r(()=>[et]),_:1}),o(x,null,{default:r(()=>[l("div",null,[o(pe,{bordered:"",separator:"",dense:""},{default:r(()=>[o(T,{header:""},{default:r(()=>[tt]),_:1}),(h(!0),_(k,null,V(e.conversation_templates,a=>d((h(),L(D,{tag:"label",key:a.value},{default:r(()=>[o(q,{avatar:""},{default:r(()=>[o(N,{modelValue:e.selected_template_key,"onUpdate:modelValue":t[10]||(t[10]=f=>e.selected_template_key=f),val:a.value,color:e.primary_color},null,8,["modelValue","val","color"])]),_:2},1024),o(q,null,{default:r(()=>[o(T,null,{default:r(()=>[v(A(a.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[W]])),128)),o($),o(T,{header:""},{default:r(()=>[at]),_:1}),(h(!0),_(k,null,V(e.internet_task_templates,a=>d((h(),L(D,{tag:"label",key:a.value},{default:r(()=>[o(q,{avatar:""},{default:r(()=>[o(N,{modelValue:e.selected_template_key,"onUpdate:modelValue":t[11]||(t[11]=f=>e.selected_template_key=f),val:a.value,color:e.primary_color},null,8,["modelValue","val","color"])]),_:2},1024),o(q,null,{default:r(()=>[o(T,null,{default:r(()=>[v(A(a.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[W]])),128)),o($),o(T,{header:""},{default:r(()=>[nt]),_:1}),(h(!0),_(k,null,V(e.digital_work_templates,a=>d((h(),L(D,{tag:"label",key:a.value},{default:r(()=>[o(q,{avatar:""},{default:r(()=>[o(N,{modelValue:e.selected_template_key,"onUpdate:modelValue":t[12]||(t[12]=f=>e.selected_template_key=f),val:a.value,color:e.primary_color},null,8,["modelValue","val","color"])]),_:2},1024),o(q,null,{default:r(()=>[o(T,null,{default:r(()=>[v(A(a.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[W]])),128))]),_:1})])]),_:1}),o($)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["style"])])}var pt=ae(qe,[["render",ot],["__scopeId","data-v-66b1fd74"]]);export{pt as default};
