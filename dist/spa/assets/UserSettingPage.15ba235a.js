import{_ as q,Y as P,r as A,Z as u,aH as I,a7 as s,L as i,a8 as b,a1 as e,a0 as l,af as k,ae as w,aI as j,e as c,a3 as f,a4 as y,ag as h,ad as B,aa as d,$ as _,ac as S,ah as C,a9 as z,ab as m}from"./index.800e447d.js";import{Q as D}from"./QBanner.1e05d6dc.js";import{Q as n,a as Q,C as $}from"./ClosePopup.3bc3de17.js";import{d as U,Q as r,b as p,a as g}from"./position-engine.37836790.js";import{a as V}from"./index.becf6c0c.js";import{e as N,f as T,g as H,h as L,i as E,_ as F,a as G,b as O,c as R,d as M}from"./human_5.a08aa240.js";var Y="/assets/penguin.bdb70ba5.png",Z="/assets/diaspora.eba1ec88.png",J="/assets/big_un.b51dbdea.png";const K=P({name:"UserSettingsPage",data:function(){return{username:null,user_id:null,avatar:"human_1",bot_avatar:"owley",is_updating:!1,err_msg:"",is_failure:!1,is_signed_in:!1,is_loading:!1,stripe_customer_id:null,subscription_status:"",premium_tf:!1,show_ai_avatars:!1,is_stripe_customer:!1,primary_color:"pink",temp_account_tf:!0}},computed:{account_tier(){var a=this;return a.premium_tf?"Premium":"Free tier"},getBotAvatarPath(){var a=this;return a.is_loading?"/icons/white_square.png":a.bot_avatar==="green_spark"?"/icons/green_spark.png":a.bot_avatar==="penguin"?"/icons/penguin.png":a.bot_avatar==="default"?"/icons/default.png":a.bot_avatar==="diaspora"?"/icons/diaspora.png":a.bot_avatar==="big_un"?"/icons/big_un.png":a.bot_avatar==="mantis"?"/icons/mantis.png":a.bot_avatar==="orphan"?"/icons/orphan.png":"/icons/owley.png"},getHumanAvatarPath(){var a=this;return a.is_loading?"/icons/white_square.png":a.avatar==="human_2"?"/icons/human_2.png":a.avatar==="human_3"?"/icons/human_3.png":a.avatar==="human_4"?"/icons/human_4.png":a.avatar==="human_5"?"/icons/human_5.png":"/icons/human_1.png"}},created:function(){var a=this;localStorage.getItem("primary_color")!=null&&(a.primary_color=localStorage.primary_color),localStorage.user_id&&(a.user_id=localStorage.user_id,a.is_signed_in=!0,a.username=localStorage.username),localStorage.getItem("temp_account_tf")!=null&&(a.temp_account_tf=localStorage.temp_account_tf),a.get_billing_details(),a.getSettings(),localStorage.premium_tf==="true"&&(a.premium_tf=!0)},watch:{bot_avatar(a,t){var v=this;v.is_loading===!1&&t!=a&&v.updateSettings()}},methods:{get_billing_details:function(){var a=this;V.get(`https://digissist-server.azurewebsites.net/users/${localStorage.user_id}/billing`).then(function(t){a.stripe_customer_id=t.data.stripe_customer_id,a.stripe_customer_id!=null&&(a.is_stripe_customer=!0),a.subscription_status=t.data.subscription_status,a.subscription_status===null&&(a.subscription_status="N/A")}).catch(function(t){console.log(t),a.is_failure=!0,a.err_msg=t}).then(function(){})},manage_billing:function(){var a=this;V.post("https://digissist-server.azurewebsites.net/stripe/customer_portal",{customer_id:a.stripe_customer_id}).then(function(t){window.location.href=t.data.url}).catch(function(t){console.log(t),a.is_failure=!0,a.err_msg=t}).then(function(){})},set_avatar:function(a){console.log(a);var t=this;t.avatar=a,t.show_avatars=!1,t.updateSettings()},set_color:function(){var a=this;a.updateSettings()},updateSettings:function(){var a=this;a.is_failure=!1,a.is_updating=!0;const t={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token};V.post(`https://digissist-server.azurewebsites.net/users/${localStorage.user_id}/settings`,{bot_avatar:a.bot_avatar,avatar:a.avatar,primary_color:a.primary_color},{headers:t}).then(function(v){a.emitter.emit("setting_change",{is_setting_changed:!0,primary_color:a.primary_color,is_signed_in:!0})}).catch(function(v){console.log(v),a.is_failure=!0,a.err_msg=v,v.response.status==403&&(localStorage.removeItem("user_id"),localStorage.removeItem("token"),a.is_signed_in=!1,a.$router.push("/login"))}).then(function(){a.is_updating=!1})},getSettings:function(){var a=this;a.is_loading=!0,a.is_signed_in&&V.get(`https://digissist-server.azurewebsites.net/users/${localStorage.user_id}/settings`,{headers:{Authorization:"Bearer "+localStorage.token}}).then(function(t){a.bot_avatar=t.data.bot_avatar,a.avatar=t.data.avatar,a.primary_color=t.data.primary_color}).catch(function(t){console.log(t),t.response.status==403&&(localStorage.removeItem("user_id"),localStorage.removeItem("token"),a.is_signed_in=!1,a.$router.push("/login"))}).then(function(){a.is_loading=!1})}},setup(){return{show_avatars:A(!1)}}}),W={class:"q-pa-md q-gutter-sm"},X={class:"q-pa-md row justify-center"},x={style:{width:"100%","max-width":"500px"}},aa={class:"row justify-center"},ea=["src"],la=f(" Pick an Avatar "),ta={class:"row justify-center text-caption"},oa={class:"row justify-center text-subtitle1 q-mt-md q-mb-xs"},sa=s("b",null,"Account type:",-1),ra={class:"row justify-center text-body1 q-ma-md"},ia=s("b",null,"Subscription status:",-1),na=s("div",{class:"row justify-center text-subtitle1 q-mt-md q-mb-xs"},[s("b",null,"AI avatar:")],-1),ua={class:"row justify-center text-subtitle1 q-mb-xs"},da=["src"],_a=f(" Pick an AI Avatar "),ma=s("div",{class:"row justify-center text-subtitle1 q-mt-md q-mb-xs"},[s("b",null,"Color scheme:")],-1),pa={class:"row justify-center q-ma-md"},fa={class:"row justify-center q-ma-md"},ga=s("div",{class:"text-h6"},"Pick your avatar:",-1),va={class:"q-pa-md"},ca=s("img",{src:N},null,-1),ba=s("img",{src:T},null,-1),ha=s("img",{src:H},null,-1),ya=s("img",{src:L},null,-1),Va=s("img",{src:E},null,-1),ka=s("div",{class:"text-h6"},"Choose AI skin:",-1),$a=f(" Saving... "),wa=f("default"),Sa=s("img",{src:F},null,-1),Ca=f("green spark"),Qa=s("img",{src:G},null,-1),Ua=f("penguin"),qa=s("img",{src:Y},null,-1),Pa=f("owley"),Aa=s("img",{src:O},null,-1),Ia=f("diaspora"),ja=s("img",{src:Z},null,-1),Ba=f("big 'un"),za=s("i",null,"Premium",-1),Da=s("img",{src:J},null,-1),Na=f("mantis"),Ta=s("i",null,"Premium",-1),Ha=s("img",{src:R},null,-1),La=f("orphan"),Ea=s("i",null,"Premium",-1),Fa=s("img",{src:M},null,-1);function Ga(a,t,v,Oa,Ra,Ma){return u(),I(j,null,[s("div",W,[i(e(D,{"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:l(()=>[e(c,{flat:"",label:"Dismiss"})]),default:l(()=>[f(" Error: "+y(a.err_msg)+" ",1)]),_:1},512),[[b,a.is_failure]])]),s("div",X,[s("div",x,[e(k,{class:"my-card"},{default:l(()=>[e(h,null,{default:l(()=>[s("div",aa,[e(c,{round:"",onClick:t[0]||(t[0]=o=>a.show_avatars=!0)},{default:l(()=>[e(n,{size:"64px"},{default:l(()=>[s("img",{src:a.getHumanAvatarPath},null,8,ea)]),_:1}),e(Q,null,{default:l(()=>[la]),_:1})]),_:1})]),i(s("div",{class:"row justify-center text-caption"},y(a.username),513),[[b,!a.temp_account_tf]]),i(s("div",ta," Temp account ",512),[[b,a.temp_account_tf]]),s("div",oa,[sa,s("div",{class:"text-subtitle1",style:B([a.premium_tf===!0?{color:"goldenrod"}:{color:"black"}])}," \xA0 "+y(a.account_tier),5)]),s("div",ra,[ia,f(" \xA0"+y(a.subscription_status),1)]),na,s("div",ua,[e(c,{round:"",onClick:t[1]||(t[1]=o=>a.show_ai_avatars=!0)},{default:l(()=>[e(n,{size:"64px"},{default:l(()=>[s("img",{src:a.getBotAvatarPath},null,8,da)]),_:1}),e(Q,null,{default:l(()=>[_a]),_:1})]),_:1})]),ma,s("div",pa,[e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[2]||(t[2]=o=>a.primary_color=o),val:"pink",label:"Pink",color:"pink",onClick:t[3]||(t[3]=o=>a.set_color())},null,8,["modelValue"]),e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[4]||(t[4]=o=>a.primary_color=o),val:"grey-10",label:"Grey",color:"grey-10",onClick:t[5]||(t[5]=o=>a.set_color())},null,8,["modelValue"]),e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[6]||(t[6]=o=>a.primary_color=o),val:"green-13",label:"Green",color:"green-13",onClick:t[7]||(t[7]=o=>a.set_color())},null,8,["modelValue"]),e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[8]||(t[8]=o=>a.primary_color=o),val:"cyan",label:"Cyan",color:"cyan",onClick:t[9]||(t[9]=o=>a.set_color())},null,8,["modelValue"]),e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[10]||(t[10]=o=>a.primary_color=o),val:"blue-10",label:"Blue",color:"blue-10",onClick:t[11]||(t[11]=o=>a.set_color())},null,8,["modelValue"]),e(d,{modelValue:a.primary_color,"onUpdate:modelValue":t[12]||(t[12]=o=>a.primary_color=o),val:"purple-6",label:"Purple",color:"purple-6",onClick:t[13]||(t[13]=o=>a.set_color())},null,8,["modelValue"])]),s("div",fa,[i(e(c,{color:a.primary_color,outline:"",label:"Manage Billing",onClick:a.manage_billing,class:"q-mx-xs"},null,8,["color","onClick"]),[[b,a.is_stripe_customer],[$]])])]),_:1})]),_:1})])]),e(w,{modelValue:a.show_avatars,"onUpdate:modelValue":t[19]||(t[19]=o=>a.show_avatars=o)},{default:l(()=>[e(k,{class:"my-card",style:{width:"400px"}},{default:l(()=>[e(h,null,{default:l(()=>[ga]),_:1}),e(h,null,{default:l(()=>[s("div",va,[e(U,{bordered:"",separator:""},{default:l(()=>[i((u(),_(p,{clickable:"",onClick:t[14]||(t[14]=o=>a.set_avatar("human_1"))},{default:l(()=>[e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[ca]),_:1})]),_:1})]),_:1})),[[m]]),i((u(),_(p,{clickable:"",onClick:t[15]||(t[15]=o=>a.set_avatar("human_2"))},{default:l(()=>[e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[ba]),_:1})]),_:1})]),_:1})),[[m]]),i((u(),_(p,{clickable:"",onClick:t[16]||(t[16]=o=>a.set_avatar("human_3"))},{default:l(()=>[e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[ha]),_:1})]),_:1})]),_:1})),[[m]]),i((u(),_(p,{clickable:"",onClick:t[17]||(t[17]=o=>a.set_avatar("human_4"))},{default:l(()=>[e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[ya]),_:1})]),_:1})]),_:1})),[[m]]),i((u(),_(p,{clickable:"",onClick:t[18]||(t[18]=o=>a.set_avatar("human_5"))},{default:l(()=>[e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Va]),_:1})]),_:1})]),_:1})),[[m]])]),_:1})])]),_:1}),e(S),e(C,{align:"right"},{default:l(()=>[i(e(c,{outline:"",color:a.primary_color,label:"Okay"},null,8,["color"]),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(w,{modelValue:a.show_ai_avatars,"onUpdate:modelValue":t[28]||(t[28]=o=>a.show_ai_avatars=o)},{default:l(()=>[e(k,{class:"my-card",style:{width:"400px"}},{default:l(()=>[e(h,null,{default:l(()=>[ka]),_:1}),e(h,null,{default:l(()=>[s("div",null,[i(s("div",null,[$a,e(z,{color:a.primary_color,size:"2em"},null,8,["color"])],512),[[b,a.is_updating]]),e(U,null,{default:l(()=>[i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[20]||(t[20]=o=>a.bot_avatar=o),val:"default",color:a.primary_color},null,8,["modelValue","color"])]),_:1}),e(r,null,{default:l(()=>[e(g,null,{default:l(()=>[wa]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Sa]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[21]||(t[21]=o=>a.bot_avatar=o),val:"green_spark",color:a.primary_color},null,8,["modelValue","color"])]),_:1}),e(r,null,{default:l(()=>[e(g,null,{default:l(()=>[Ca]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Qa]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[22]||(t[22]=o=>a.bot_avatar=o),val:"penguin",color:a.primary_color},null,8,["modelValue","color"])]),_:1}),e(r,null,{default:l(()=>[e(g,null,{default:l(()=>[Ua]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[qa]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[23]||(t[23]=o=>a.bot_avatar=o),val:"owley",color:a.primary_color},null,8,["modelValue","color"])]),_:1}),e(r,null,{default:l(()=>[e(g,null,{default:l(()=>[Pa]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Aa]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[24]||(t[24]=o=>a.bot_avatar=o),val:"diaspora",color:a.primary_color},null,8,["modelValue","color"])]),_:1}),e(r,null,{default:l(()=>[e(g,null,{default:l(()=>[Ia]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[ja]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[25]||(t[25]=o=>a.bot_avatar=o),val:"big_un",color:"amber",disable:!a.premium_tf},null,8,["modelValue","disable"])]),_:1}),e(r,{style:{color:"goldenrod"}},{default:l(()=>[e(g,null,{default:l(()=>[Ba]),_:1}),e(g,{caption:""},{default:l(()=>[za]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Da]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[26]||(t[26]=o=>a.bot_avatar=o),val:"mantis",color:"amber",disable:!a.premium_tf},null,8,["modelValue","disable"])]),_:1}),e(r,{style:{color:"goldenrod"}},{default:l(()=>[e(g,null,{default:l(()=>[Na]),_:1}),e(g,{caption:""},{default:l(()=>[Ta]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Ha]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]]),i((u(),_(p,{disable:a.is_updating,tag:"label"},{default:l(()=>[e(r,{avatar:""},{default:l(()=>[e(d,{modelValue:a.bot_avatar,"onUpdate:modelValue":t[27]||(t[27]=o=>a.bot_avatar=o),val:"orphan",color:"amber",disable:!a.premium_tf},null,8,["modelValue","disable"])]),_:1}),e(r,{style:{color:"goldenrod"}},{default:l(()=>[e(g,null,{default:l(()=>[La]),_:1}),e(g,{caption:""},{default:l(()=>[Ea]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(n,null,{default:l(()=>[Fa]),_:1})]),_:1})]),_:1},8,["disable"])),[[m]])]),_:1})])]),_:1}),e(S),e(C,{align:"right"},{default:l(()=>[i(e(c,{outline:"",color:a.primary_color,label:"Okay"},null,8,["color"]),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var xa=q(K,[["render",Ga]]);export{xa as default};
