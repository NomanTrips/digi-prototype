var ie=Object.defineProperty,re=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var K=(e,a,o)=>a in e?ie(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,l=(e,a)=>{for(var o in a||(a={}))fe.call(a,o)&&K(e,o,a[o]);if(H)for(var o of H(a))de.call(a,o)&&K(e,o,a[o]);return e},y=(e,a)=>re(e,ce(a));import{c as ve,D as ge,E as he,aq as me,F as Te,r as Q,a as r,G as ke,ar as Ce,H as Pe,as as ye,I as Se,at as Oe,w as W,ax as qe,ay as I,az as Be,A as Ee,aA as Fe,R as xe,aB as we,h as _,d as Ae,au as De,f as Me,g as Re,aC as be,aD as He,C as Ke}from"./index.d1cd1d69.js";import{u as Qe,v as j,e as We,f as Ie,g as _e,p as z,h as je,r as G,s as ze}from"./position-engine.9401264a.js";var $e=ve({name:"QMenu",inheritAttrs:!1,props:y(l(l(l(l({},Qe),ge),he),me),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:j},self:{type:String,validator:j},offset:{type:Array,validator:We},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...Te,"click","escape-key"],setup(e,{slots:a,emit:o,attrs:g}){let c=null,v,f,h;const S=Re(),{proxy:m}=S,{$q:n}=m,s=Q(null),u=Q(!1),L=r(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),U=ke(e,n),{registerTick:$,removeTick:O}=Ce(),{registerTimeout:q,removeTimeout:B}=Pe(),{transition:J,transitionStyle:N}=ye(e,u),{localScrollTarget:E,changeScrollEvent:V,unconfigureScrollTarget:X}=Ie(e,R),{anchorEl:i,canShow:Y}=_e({showing:u}),{hide:F}=Se({showing:u,canShow:Y,handleShow:oe,handleHide:ae,hideOnRouteChange:L,processOnMount:!0}),{showPortal:x,hidePortal:w,renderPortal:Z}=Oe(S,s,se),T={anchorEl:i,innerRef:s,onClickOutside(t){if(e.persistent!==!0&&u.value===!0)return F(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Ke(t),!0}},A=r(()=>z(e.anchor||(e.cover===!0?"center middle":"bottom start"),n.lang.rtl)),p=r(()=>e.cover===!0?A.value:z(e.self||"top start",n.lang.rtl)),ee=r(()=>(e.square===!0?" q-menu--square":"")+(U.value===!0?" q-menu--dark q-dark":"")),te=r(()=>e.autoClose===!0?{onClick:ne}:{}),D=r(()=>u.value===!0&&e.persistent!==!0);W(D,t=>{t===!0?(qe(C),je(T)):(I(C),G(T))});function k(){be(()=>{let t=s.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function oe(t){if(O(),B(),c=e.noRefocus===!1?document.activeElement:null,Be(b),x(),R(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const P=Ee(t);if(P.left!==void 0){const{top:ue,left:le}=i.value.getBoundingClientRect();v={left:P.left-le,top:P.top-ue}}}f===void 0&&(f=W(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,d)),e.noFocus!==!0&&document.activeElement.blur(),$(()=>{d(),e.noFocus!==!0&&k()}),q(()=>{n.platform.is.ios===!0&&(h=e.autoClose,s.value.click()),d(),x(!0),o("show",t)},e.transitionDuration)}function ae(t){O(),B(),w(),M(!0),c!==null&&(t===void 0||t.qClickOutside!==!0)&&(c.focus(),c=null),q(()=>{w(!0),o("hide",t)},e.transitionDuration)}function M(t){v=void 0,f!==void 0&&(f(),f=void 0),(t===!0||u.value===!0)&&(Fe(b),X(),G(T),I(C)),t!==!0&&(c=null)}function R(){(i.value!==null||e.scrollTarget!==void 0)&&(E.value=xe(i.value,e.scrollTarget),V(E.value,d))}function ne(t){h!==!0?(we(m,t),o("click",t)):h=!1}function b(t){D.value===!0&&e.noFocus!==!0&&He(s.value,t.target)!==!0&&k()}function C(t){o("escape-key"),F(t)}function d(){const t=s.value;t===null||i.value===null||ze({el:t,offset:e.offset,anchorEl:i.value,anchorOrigin:A.value,selfOrigin:p.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function se(){return _(De,{name:J.value,appear:!0},()=>u.value===!0?_("div",l(y(l({},g),{ref:s,tabindex:-1,class:["q-menu q-position-engine scroll"+ee.value,g.class],style:[g.style,N.value]}),te.value),Ae(a.default)):null)}return Me(M),Object.assign(m,{focus:k,updatePosition:d}),Z}});export{$e as Q};
