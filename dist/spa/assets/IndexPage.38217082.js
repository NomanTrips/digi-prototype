import{c as M,a as v,h as a,ax as j,ay as z,az as P,ag as D,af as E,r as R,ah as x,aA as k,ap as b,ak as n,aj as i,aB as I,aC as _,aD as L,aE as U,a5 as q,aq as O,au as $,aF as H,W as p,aG as A,aH as F,am as y,ai as G}from"./index.ebc98563.js";import{C as J}from"./ClosePopup.cadbd842.js";import{a as V}from"./index.becf6c0c.js";import"./lodash.a28078db.js";var T=M({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const s=v(()=>e.sent===!0?"sent":"received"),l=v(()=>`q-message-text-content q-message-text-content--${s.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),d=v(()=>`q-message-text q-message-text--${s.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),w=v(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),r=v(()=>e.size!==void 0?`col-${e.size}`:""),f=v(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function Q(u){return t.stamp!==void 0?[u,a("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[u,a("div",{class:"q-message-stamp",[f.value.stamp]:e.stamp})]:[u]}function S(u,m){const g=m===!0?u.length>1?c=>c:c=>a("div",[c]):c=>a("div",{[f.value.msg]:c});return u.map((c,N)=>a("div",{key:N,class:d.value},[a("div",{class:l.value},Q(g(c)))]))}return()=>{const u=[];t.avatar!==void 0?u.push(t.avatar()):e.avatar!==void 0&&u.push(a("img",{class:`q-message-avatar q-message-avatar--${s.value}`,src:e.avatar,"aria-hidden":"true"}));const m=[];t.name!==void 0?m.push(a("div",{class:`q-message-name q-message-name--${s.value}`},t.name())):e.name!==void 0&&m.push(a("div",{class:`q-message-name q-message-name--${s.value}`,[f.value.name]:e.name})),t.default!==void 0?m.push(S(j(t.default()),!0)):e.text!==void 0&&m.push(S(e.text)),u.push(a("div",{class:r.value},m));const g=[];return t.label!==void 0?g.push(a("div",{class:"q-message-label"},t.label())):e.label!==void 0&&g.push(a("div",{class:"q-message-label",[f.value.label]:e.label})),g.push(a("div",{class:w.value},u)),a("div",{class:`q-message q-message-${s.value}`},g)}}});const W=[a("circle",{cx:"15",cy:"15",r:"15"},[a("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),a("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),a("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[a("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),a("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),a("circle",{cx:"105",cy:"15",r:"15"},[a("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),a("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var X=M({name:"QSpinnerDots",props:z,setup(e){const{cSize:t,classes:s}=P(e);return()=>a("svg",{class:s.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},W)}});const K=[{messageId:1,sender:"Human",message_text:"Hello, who are you?"},{messageId:2,sender:"AI",message_text:"I am an AI created by OpenAI. How can I help you today?"}];var Y={messages:K},h,Z=new Uint8Array(16);function ee(){if(!h&&(h=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!h))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(Z)}var te=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ae(e){return typeof e=="string"&&te.test(e)}var o=[];for(var C=0;C<256;++C)o.push((C+256).toString(16).substr(1));function ne(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!ae(s))throw TypeError("Stringified UUID is invalid");return s}function B(e,t,s){e=e||{};var l=e.random||(e.rng||ee)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,t){s=s||0;for(var d=0;d<16;++d)t[s+d]=l[d];return t}return ne(l)}const se=E({name:"IndexPage",Components:{},data:function(){return{convo_template:`The following is a conversation with an AI assistant. The assistant is helpful, creative, clever, and very friendly.\r
\r
Human: Hello, who are you?\r
AI: I am an AI created by OpenAI. How can I help you today?\r
\r
Human: `,convo_json:{messages:[]},user_input:"",msg_sequence:2,toggle_spinner:!1,user_id:0,is_signed_in:!0,bot_avatar:"robot-1"}},computed:{getBotAvatarPath(){var e=this;return e.bot_avatar==="robot-2"?"/src/assets/robot-2.png":e.bot_avatar==="robot-3"?"/src/assets/robot-3.png":e.bot_avatar==="robot-4"?"/src/assets/robot-4.png":e.bot_avatar==="robot-5"?"/src/assets/robot-5.png":"/src/assets/robot-1.png"}},created:function(){var e=this;localStorage.user_id&&(this.user_id=localStorage.user_id,this.is_signed_in=!0,e.getSettings()),e.loadTemplate("Conversation")},mounted(){},watch:{name(e){localStorage.user_id=e}},methods:{radio:function(){this.$q.dialog({title:"Templates",message:"Choose an conversation template:",options:{type:"radio",model:"opt1",items:[{label:"TL;DR Summarization",value:"opt1",color:"pink"},{label:"Question and answering",value:"opt2",color:"pink"},{label:"Free form conversation",value:"opt3",color:"pink"}]},cancel:!0,persistent:!0}).onOk(e=>{}).onCancel(()=>{}).onDismiss(()=>{})},loadTemplate:function(e){var t=this;t.convo_json=Y},send_message:function(){var e=this,t={messageId:B(),sender:"Human",message_text:e.user_input};t.messageId=t.messageId+1,e.convo_json.messages.push(t),e.user_input="",e.toggle_spinner=!0,e.convo_template=String(e.convo_template)+String(t.message_text)+`\r
`;const s={"Content-Type":"application/json"};V.post("http://localhost:3000/completions",{engine:"text-davinci-002",prompt:e.convo_template,max_tokens:150,temperature:.9,top_p:1,n:1,frequency_penalty:0,presence_penalty:.6,stream:!1,logprobs:null},{headers:s}).then(function(l){var d={messageId:B(),sender:"AI",message_text:String(l.data.choices[0].text)};e.toggle_spinner=!1,e.convo_json.messages.push(d),e.convo_template=String(e.convo_template)+String(d.message_text)+`\r
\r
Human: `}).catch(function(l){console.log(l),e.toggle_spinner=!1})},getSettings:function(){var e=this;e.is_signed_in&&V.get(`http://localhost:3000/users/${localStorage.user_id}/settings`).then(function(t){console.log(t),e.bot_avatar=t.data.bot_avatar}).catch(function(t){console.log(t)}).then(function(){})}},setup(){return{card:R(!1)}}}),oe={class:"q-pa-md row justify-center"},re={style:{width:"100%","max-width":"500px"}},ie={class:"q-pa-md",style:{"max-width":"500px"}},le=y("Paste"),ue=y("Clear"),de=y("Templates"),me=y("Edit text"),ce=b("div",{class:"text-h6"},"Edit conversation text:",-1);function ge(e,t,s,l,d,w){return x(),k("div",oe,[b("div",re,[n(I,{class:"my-card"},{default:i(()=>[n(_,null,{default:i(()=>[(x(!0),k(L,null,U(e.convo_json.messages,r=>(x(),G(T,{key:r.messageId,name:r.sender,avatar:r.sender=="AI"?e.getBotAvatarPath:"https://cdn.quasar.dev/img/avatar1.jpg",text:[r.message_text],sent:r.sender!="AI","bg-color":r.sender=="AI"?"pink":"light-grey","text-color":r.sender=="AI"?"white":"black"},null,8,["name","avatar","text","sent","bg-color","text-color"]))),128)),q(n(T,{name:"AI",avatar:e.getBotAvatarPath,"bg-color":"pink","text-color":"white"},{default:i(()=>[n(X,{size:"2rem"})]),_:1},8,["avatar"]),[[O,e.toggle_spinner]])]),_:1}),n($),n(_,null,{default:i(()=>[b("div",ie,[n(H,{modelValue:e.user_input,"onUpdate:modelValue":t[0]||(t[0]=r=>e.user_input=r),outlined:"",color:"pink",autogrow:"",disable:e.toggle_spinner},{after:i(()=>[n(p,{round:"",dense:"",flat:"",icon:"send",onClick:e.send_message},null,8,["onClick"])]),_:1},8,["modelValue","disable"])])]),_:1}),n(A,{align:"around"},{default:i(()=>[n(p,{outline:"",color:"pink",icon:"content_paste"},{default:i(()=>[le]),_:1}),n(p,{outline:"",color:"pink",icon:"refresh"},{default:i(()=>[ue]),_:1}),n(p,{outline:"",color:"pink",icon:"collections_bookmark",onClick:e.radio},{default:i(()=>[de]),_:1},8,["onClick"]),n(p,{outline:"",color:"pink",icon:"edit_note",onClick:t[1]||(t[1]=r=>e.card=!0)},{default:i(()=>[me]),_:1}),n(F,{modelValue:e.card,"onUpdate:modelValue":t[3]||(t[3]=r=>e.card=r)},{default:i(()=>[n(I,{class:"my-card"},{default:i(()=>[n(_,null,{default:i(()=>[ce]),_:1}),n(_,null,{default:i(()=>[b("div",null,[n(H,{modelValue:e.convo_template,"onUpdate:modelValue":t[2]||(t[2]=r=>e.convo_template=r),outlined:"",color:"pink",type:"textarea",autogrow:"",style:{width:"500px"}},null,8,["modelValue"])])]),_:1}),n($),n(A,{align:"right"},{default:i(()=>[q(n(p,{outline:"",color:"pink",label:"Okay"},null,512),[[J]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])}var he=D(se,[["render",ge]]);export{he as default};
